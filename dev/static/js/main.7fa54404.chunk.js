(this.webpackJsonpdungeon=this.webpackJsonpdungeon||[]).push([[0],{195:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(92),l=a.n(o),i=a(7),s=a(3),c=a(13),p=a(2),u=a(5),m=a(4),d=a(1),h=a(6),y=a(27),g=a(58),b=a.n(g);var S=Object(y.b)({GameTime:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_TURN":a=Object(d.a)(Object(d.a)({},a),{},{Turn:t.Turn});break;case"ADD_TIMESTAMP":a.GameTime||(a=Object(d.a)(Object(d.a)({},a),{},{Start:[]})),a=Object(d.a)(Object(d.a)({},a),{},{Start:[].concat(Object(i.a)(a.Start),[{Milliseconds:t.Milliseconds,HumanFriendly:t.HumanFriendly}])})}return a},Player:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_PLAYER":a=Object(d.a)(Object(d.a)({},e),t.Player)}return a},Monsters:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_MONSTERS":a=Object(d.a)(Object(d.a)({},a),t.Monsters)}return a},Maps:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_MAPS":a=Object(d.a)(Object(d.a)({},a),{},{WallMap:Object(i.a)(t.WallMap),WallMapRevealed:Object(i.a)(t.WallMapRevealed),DiscoveryMap:Object(i.a)(t.DiscoveryMap),LootMap:Object(i.a)(t.LootMap),MonsterMap:Object(i.a)(t.MonsterMap)});break;case"UPDATE_DISCOVERY_MAP":a=Object(d.a)(Object(d.a)({},a),{},{DiscoveryMap:Object(i.a)(t.DiscoveryMap)})}return a},Loot:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_LOOT":a=Object(d.a)(Object(d.a)({},a),t.LootContainers)}return a},EventLog:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_EVENT_LOG":a=Object(d.a)(Object(d.a)({},a),t.EventLog)}return a},Story:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_STORY":a=Object(d.a)(Object(d.a)({},a),t.Story)}return a},Texts:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_TEXTS":a=Object(i.a)(t.Texts)}return a},CurrentEvent:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_CURRENT_EVENT":a=Object(i.a)(t.Event)}return a},Cheats:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_CHEATS":a=Object(d.a)(Object(d.a)({},a),t.Cheats)}return a},Sound:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_SOUND":a=Object(d.a)(Object(d.a)({},a),t.Sound);break;case"UPDATE_VOLUME":a=Object(d.a)(Object(d.a)({},a),{},{Volume:Math.max(0,Math.min(1,Math.floor(100*t.Volume)/100))});break;case"MUTE_VOLUME":a=Object(d.a)(Object(d.a)({},a),{},{Volume:0});break;case"INCREASE_VOLUME":a=Object(d.a)(Object(d.a)({},a),{},{Volume:Math.min(1,Math.floor(100*(a.Volume+.1))/100)});break;case"DECREASE_VOLUME":a=Object(d.a)(Object(d.a)({},a),{},{Volume:Math.max(0,Math.floor(100*(a.Volume-.1))/100)})}return a},Debug:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_DEBUG":a=Object(d.a)(Object(d.a)({},a),{},{Debug:t.Debug,SoundDebug:t.SoundDebug})}return a},Responsiveness:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_SCREEN_SIZE":a=Object(d.a)(Object(d.a)({},a),{},{MobileScreen:t.MobileScreen,TabletScreen:t.TabletScreen})}return a},Styles:function(e,t){var a=Object(d.a)({},e);switch(t.type){case"UPDATE_STYLES":a=Object(d.a)(Object(d.a)({},a),t.Styles)}return a}}),f={Messages:{NewGame:"Ready for adventure!",Debug:{On:"Debug is ON.",Off:"Debug is OFF."},SoundDebug:{On:"Sound debug is ON.",Off:"Sound debug is OFF."},Cheats:{ShowFullMap:{On:"You can sense your surroundings very clearly.",Off:"Your akin sense of perception dissipates."},NoClip:{On:"Your essence is transformed. Your body becomes immaterial.",Off:"You cease floating into the air. Your feet are now anchored to the ground again."},GodMode:{On:"You feel almighty and invincible.",Off:"Your godly powers leave your body."},CastAlwaysSucceeds:{On:"Your concentration is at its highest.",Off:"You're not sure your next spell will succeed anymore."}},LoadGameError:{Invalid:"The game state you entered is not valid."},Collision:"You can't go there.",LockedDoor:"You try to open the door... it's locked.",PlayerMissed:"You missed your target!",PlayerDead:"Ouch! You are dead.",Loot:{Gathered:"You gathered all the loot in your backpack.",TooHeavy:"The loot is too heavy.",TooMuch:"You can not take all the loot.",ItemTooHeavy:"This item is too heavy.",BackpackFull:"Your backpack is full."},Potion:{NoEffect:"The potion had no effect.",Health1:"You feel a little better.",Health2:"Your body regenerates quickly.",Health3:"This potion was much needed.",Stamina1:"The potion gave you a small boost of energy.",Stamina2:"You're in better shape now.",Stamina3:"You feel invigorated.",Mana1:"As you drink the potion, a tiny sparkle lights up in your chest.",Mana2:"You feel the power of magic.",Mana3:"Nice!"},Spell:{CanNotCast:"You have not studied the arcane of magic. You can not cast spells.",UnsufficientLevel:"You have not mastered the secrets of this spell yet.",NotEnoughMana:["You can't gather the energy necessary to operate this kind of magic.","Your power is too low to cast this spell.","You position your hands and get ready to cast the spell. Nothing happens."],Failed:["As you finish pronouncing the magic words to cast the spell, the energy you focalized dissipates.","Your mind wandered at a critical time that required all your attention. The spell failed.","Darn! The effect of your spell flopped miserably."],NoTarget:"A beautiful ray of magic appears, and crashes on a wall in front of you.",NoTargetArea:"A wave of energy emanated from you, but nobody got hit."},Food:{Yummy:r.a.createElement("span",null,"Crunch crunch... Now ",r.a.createElement("i",null,"that")," was yummy."),Delicious:"Delicious! Totally worth it.",Diet:"Look at you. A perfect, healthy diet.",NotAsGoodAsMyMom:"Not as good as your mom's, but that will do.",Rest:"Aaaaaah! That was a good meal. How about a little nap now?",More:"Well, you could definitively use some more of that.",NotNecessary:"Well, that wasn't really necessary, was it?"}},PartialMessages:{Period:".",UnlockDoor:"You unlocked the door with the ",MonsterNoticed:" noticed your presence.",MonsterAttacking:" is attacking you.",MonsterMissed:" missed their attack.",MonsterKilled:"You killed ",PlayerHit:"You hit ",PlayerHealth:{Weak:"You feel very weak.",BadlyInjured:"You are badly injured.",ThatHurt:"That hurt a little.",JustAScratch:"No worries, just a scratch."},SpellSuccess:"You successfully cast "},Help:{ContactMe:"",GitHub:"",Vitals:{Health:"Your health determines how much damage you can take before you fall unconscious.",Mana:"Mana is a pool of energy that is necessary to cast spells.",Stamina:"As your stamina decreases, you are more likely to fail at your actions."},Arrows:{Race:"Click here to choose a different race.",Class:"Click here to choose a different class.",Spell:"Click here to choose a different spell.",North:"Click here to go north.",West:"Click here to go west.",East:"Click here to go east.",South:"Click here to go south."},Stats:"Your stats define the kind of adventurer you are.",Abilities:{Strength:"Strength dictates the force of your attacks.",Constitution:"Your constitution determines how much effort you can sustain and how good you are at taking damage.",Dexterity:"Dexterity influences how able you are to hit your target.",Intelligence:"Your intelligence affects your ability to successfully cast spells."},Level:"Your level represents how seasoned you are. Every time you level up, you become more able. If you are a spellcaster, you also learn new spells.",LevelSpellcaster:"Your level represents how seasoned you are. Every time you level up, you become more able and you learn new spells.",LevelNotSpellcaster:"Your level represents how seasoned you are. Every time you level up, you become more able.",XP:"You gain experience points as you progress in your adventure. When you reach a certain amount, you level up.",ArmorClass:"Your Armor Class (AC) shows how well protected you are against the attacks of enemies",Backpack:"You can carry items that are not equipped in your backpack. Depending on the type of backpack you own, you can travel with more or less items.",BackpackWeight:"This is the current weight of your backpack and your equipment.",BackpackMaxWeight:"This is the maximum weight you can hold without being immobilized. The stronger you are, the more weight you can bear.",SpellBook:"Your spellbook contains all the spells that you can cast.",Buttons:{Reroll:"Generate a new set of numbers.",PlayGame:"Ready? Let's get started!",ResumeGame:"Changed your mind? Click here to stop the creation of a new character and resume your adventure where you left it.",NewGame:"Start a game with a different character.",SaveGame:"Copy the current state of your game.",LoadGame:"Insert a game state to resume playing.",ClearLog:"Remove all log entries until now.",Rest:"Take a long rest to restore your health, your mana, and your stamina. Be careful, enemies might attack you in your sleep!",Take:"Put the loot in your backpack."},GameStateBox:{SaveGame:"Copy this text and store it in a file in order to resume your game later.",LoadGame:"Copy here a previously saved game to keep playing it."},CharacterName:"Enter the name of your character.",AbilityBonus:"The race you selected has a bonus for this ability.",Race:"Each race has slightly different natural traits.",Class:"A class determines what your talent are and what type of combat you trained for.",FirstSpell:"Choose the first spell that will go into your spellbook.",Sound:""},LevelXP:{Level2:10,Level3:900,Level4:2700,Level5:6500,Level6:14e3,Level7:23e3,Level8:34e3,Level9:48e3,Level10:64e3,Level11:85e3,Level12:1e5,Level13:12e4,Level14:14e4,Level15:165e3,Level16:195e3,Level17:225e3,Level18:265e3,Level19:305e3,Level20:355e3},MaxPlayerLevel:20,MaxAbilityScore:50},v="Heal",x="Attack",O="Motion",k="Bonus",C="Surrounding",E="Facing",j="Adjacent",M={Type:"scroll",image:"scroll_attack",Weight:.1},T={Type:"scroll",image:"scroll_bonus",Weight:.1},I={Type:"scroll",image:"scroll_motion_modifier",Weight:.1},w={Type:"scroll",image:"scroll_other",Weight:.1},D={Dagger:"dagger",Sword:"sword",Blunt:"blunt",Staff:"staff",Bow:"bow",Crossbow:"crossbow"},A=Object.keys(D).filter((function(e){return"Bow"!==D[e]&&"Crossbow"!==D[e]})).map((function(e){return D[e]})),P={Races:{Dwarf:{Name:"dwarf",AbilityBoost:{Constitution:2},Description:"Dwarves are used to the hardship of the mountains. They are very resistant to attacks."},Elf:{Name:"elf",AbilityBoost:{Dexterity:2},Description:"Elves are atuned to their body. Their concentration gives them a great advantage during combat."},Human:{Name:"human",AbilityBoost:{Constitution:1,Strength:1,Intelligence:1},Description:"Humans are polyvalent. Their instincts make them fit for any kind of adventure."},Gnome:{Name:"gnome",AbilityBoost:{Intelligence:2},Description:"Gnomes are a smart people. They can be great wizards."}},Classes:{Barbarian:{Name:"barbarian",AbilityPriorities:["Strength","Constitution","Dexterity","Intelligence"],Proficiency:Object.keys(D).map((function(e){return D[e]})),Description:"Barbarians are vigorous warriors. Their innate combat skills give them an advantage with all weapons. Conversely, barbarians have absolutely no interest in magic."},Cleric:{Name:"cleric",Spellcaster:!0,AbilityPriorities:["Intelligence","Constitution","Dexterity","Strength"],Proficiency:["blunt","staff"],Description:"Clerics are spiritual guides who have a strong connection with the plane of immateriality. Their faith allows them to summon the powers of their gods. Clerics are experimented with blunt weapons and staves."},Fighter:{Name:"fighter",AbilityPriorities:["Strength","Dexterity","Constitution","Intelligence"],Proficiency:A,Description:"Fighters are strong beings that consider combat as a sport. Their meticulous training make them more precise than barbarians. Fighters tend to have a slightly weaker constitution, though. They are unable to cast spells but they know the secrets of all melee weapons."},Paladin:{Name:"paladin",Spellcaster:!0,AbilityPriorities:["Strength","Intelligence","Constitution","Dexterity"],Proficiency:["sword","blunt"],Description:"Paladins are both skilled soldiers and well-versed into the arcane of magic. Their weapon of choice is the sword but they also do a good deal of damage with blunt weapons."},Ranger:{Name:"ranger",AbilityPriorities:["Dexterity","Constitution","Strength","Intelligence"],Proficiency:["dagger","sword","bow","crossbow"],Description:"Rangers are stealthy individuals. Their incredible dexterity is instrumental during combats. They excel at the art of dodging and hitting their foes. Rangers are good with daggers, swords, bows, and crossbows."},Wizard:{Name:"wizard",Spellcaster:!0,AbilityPriorities:["Intelligence","Dexterity","Constitution","Strength"],Proficiency:["dagger","staff"],Description:"Wizard are powerful mages. Their dedicated study of the world and its essence give them the ability to manipulate reality. They cast spells to protect themselves or destroy their opponents. Wizards are proficient with staves and daggers."}},Items:{SpellBook:{Type:"spellbook",Name:"spellbook",Image:"spellbook",Description:"This is where you keep notes on how to cast spells. Without this book, your magic is useless.",Weight:4},BagOfHolding:{Type:"backpack",Name:"bag of holding",Image:"backpack_holding",Description:"The best backpack you could dream of. Lots of room in there.",MaxItems:48},TravelerBag:{Type:"backpack",Name:"traveler's bag",Image:"backpack_traveler",Description:"A must-have for adventurers. Holds a comfortable number of items.",MaxItems:32},DuffelBag:{Type:"backpack",Name:"duffel bag",Description:"This bag allows you to bring additional items with you.",MaxItems:16},Haversack:{Type:"backpack",Name:"haversack",Description:"A small bag where you can carry essential items.",MaxItems:10},IronKey:{type:"key",Name:"iron key",image:"key_iron",Weight:.1},BrassKey:{type:"key",Name:"brass key",image:"key_brass"},OrnateKey:{type:"key",Name:"ornate key",image:"key_ornate"},Rock:{Level:1,Type:"misc",Name:"rock",image:"rock",Weight:2},HealthPotion:{Level:1,Type:"potion",Name:"health potion",image:"potion_health",Heal:"Health",Strength:12,Action:"DrinkPotion",Description:"This vial contains a precious liquid that heals your wounds immediately.",Weight:.5},ManaPotion:{Level:1,Type:"potion",Name:"mana potion",image:"potion_mana",Heal:"Mana",Strength:8,Action:"DrinkPotion",Description:"A precious item for spellcasters. This potion replenishes your magic energy without the need to rest.",Weight:.5},StaminaPotion:{Level:1,Type:"potion",Name:"potion of vigor",image:"potion_stamina",Heal:"Stamina",Strength:30,Action:"DrinkPotion",Description:"A useful beverage for adventurers that need a boost to keep going.",Weight:.5},EmeraldDagger:{Name:"emerald dagger",Type:"weapon",image:"weapon_dagger_emerald",Damage:{Min:3,Max:7},Weight:3},Sword:{Name:"sword",Type:"weapon",image:"weapon_sword",Damage:{Min:5,Max:9}},Bow:{Type:"weapon",Name:"bow",image:"weapon_bow"},SimpleStaff:{Name:"simple staff",Type:"weapon",image:"weapon_staff"},BurningStaff:{Name:"burning staff",Type:"staff",Image:"weapon_staff_burning"},StaffOfLife:{Name:"staff of life",Type:"staff",Image:"weapon_staff_life"},StaffOfintelligence:{Name:"staff of intelligence",Type:"staff",Image:"weapon_staff_intelligence"},CrusaderShield:{Name:"crusader shield",Type:"shield",Image:"shield_crusader"},TitaniumShield:{Name:"titanium_shield",Type:"shield",Image:"shield_titanium"},AmuletOfMagic:{Name:"amulet of magic",Type:"necklace",image:"amulet_magic"},SkullAmulet:{Name:"skull amulet",Type:"necklace",image:"amulet_skull"},ChainmailArmor:{Name:"chainmail armor",Type:"armor",Image:"armor_chainmail"},SteelArmor:{Name:"steel armor",Type:"armor",Image:"armor_steel"},GoldArmor:{Name:"gold armor",Type:"armor",Image:"armor_gold"},MithrilArmor:{Name:"mithril armor",Type:"armor",Image:"armor_mithril"},TitaniumArmor:{Name:"titanium armor",Type:"armor",Image:"armor_titanium"},LeatherBoots:{Name:"leather boots",Type:"boots",Image:"boots_leather"},LeatherGloves:{Name:"leather gloves",Type:"gloves",Image:"gloves_leather"},SteelHelm:{Name:"steel helm",Type:"helm",Image:"steel_helm"},KnightHelm:{Name:"knight helm",Type:"helm",Image:"helm_knight"},Leaf:{Level:1,Name:"leaf",Type:"food",image:"food_leaf",RestoreStamina:2,Action:"ConsumeFood",Description:"There's probably more nutritious food that this leaf.",Weight:.1},Apple:{Level:1,Name:"apple",Type:"food",image:"food_apple",RestoreStamina:3,Action:"ConsumeFood",Description:"A delicious apple.",Weight:.3},Berries:{Level:1,Name:"berries",Type:"food",image:"food_berries",RestoreStamina:3,Action:"ConsumeFood",Description:"Some sort of juicy fruit.",Weight:.2},Grapes:{Level:1,Name:"grapes",Type:"food",image:"food_grapes",RestoreStamina:3,Action:"ConsumeFood",Description:"Nothing special about these grapes.",Weight:.4},Bread:{Level:1,Name:"bread",Type:"food",image:"food_bread",RestoreStamina:5,Action:"ConsumeFood",Description:"Probably freshly baked. Where's the cheese?",Weight:.5},Chicken:{Level:1,Name:"chicken",Type:"food",image:"food_chicken",RestoreStamina:7,Action:"ConsumeFood",Description:"Would be even better in a soup.",Weight:.4},Sausage:{Level:1,Name:"sausage",Type:"food",image:"food_sausage",RestoreStamina:7,Action:"ConsumeFood",Description:"Meat!",Weight:.3},MagicArrowScroll:Object(d.a)({Level:1,Name:"scroll of magic arrow",Spell:"MagicArrow"},M),ColdTouchScroll:Object(d.a)({Name:"scroll of cold touch",Spell:"ColdTouch"},M),FireballScroll:Object(d.a)({Name:"scroll of fireball",Spell:"Fireball"},M),VampiricTouchScroll:Object(d.a)({Name:"scroll of vampiric touch",Spell:"VampiricTouch"},M),ChainLightningScroll:Object(d.a)({Name:"scroll of chain lightning",Spell:"ChainLightning"},M),CircleOfDeathScroll:Object(d.a)({Name:"scroll of circle of death",Spell:"CircleOfDeath"},M),MoonbeamScroll:Object(d.a)({Name:"scroll of moonbeam",Spell:"Moonbeam"},M),FirstAidScroll:Object(d.a)({Level:1,Name:"scroll of first aid",Spell:"FirstAid"},T),AlertnessScroll:Object(d.a)({Name:"scroll of alertness",Spell:"Alertness"},T),HealWoundsScroll:Object(d.a)({Name:"scroll of heal wounds",Spell:"HealWounds"},T),RegenerateScroll:Object(d.a)({Name:"scroll of regenerate",Spell:"Regenerate"},T),TrueStrikeScroll:Object(d.a)({Name:"scroll of true strike",Spell:"TrueStrike"},T),BarkSkinScroll:Object(d.a)({Level:1,Name:"scroll of bark sin",Spell:"BarkSkin"},T),StoneSkinScroll:Object(d.a)({Name:"scroll of stone skin",Spell:"StoneSkin"},T),BlessScroll:Object(d.a)({Name:"scroll of bless",Spell:"Bless"},T),BlurScroll:Object(d.a)({Name:"scroll of blur",Spell:"Blur"},T),MirrorShieldScroll:Object(d.a)({Name:"scroll of mirror shield",Spell:"MirrorShield"},T),BerserkScroll:Object(d.a)({Name:"scroll of berserk",Spell:"Berserk"},T),ConfusionScroll:Object(d.a)({Name:"scroll of confusion",Spell:"Confusion"},I),EntangleScroll:Object(d.a)({Name:"scroll of entangle",Spell:"Entangle"},I),ShockingGraspScroll:Object(d.a)({Name:"scroll of shocking grasp",Spell:"ShockingGrasp"},I),EarthquakeScroll:Object(d.a)({Name:"scroll of earthquake",Spell:"Earthquake"},I),CreateFoodScroll:Object(d.a)({Name:"scroll of create food",Spell:"CreateFood"},w),DetectMonsterScroll:Object(d.a)({Name:"scroll of detect monster",Spell:"DetectMonster"},w),FindTrapsScroll:Object(d.a)({Name:"scroll of find traps",Spell:"FindTraps"},w),MistyStepScroll:Object(d.a)({Name:"scroll of misty step",Spell:"MistyStep"},w),InvisibilityScroll:Object(d.a)({Name:"scroll of invisibility",Spell:"Invisibility"},w),GlobeOfInvulnerabilityScroll:Object(d.a)({Name:"scroll of globe of invulnerability",Spell:"GlobeOfInvulnerability"},w)},GenerateRandomItems:{Level1:{Level:1,random:!0}},Spells:{MagicArrow:{Level:1,ManaCost:3,Name:"magic arrow",Image:"spell_magic_arrow",Type:x,Damage:{Min:1,Max:5},Duration:1,Description:"A low-level spell. A magic arrow shoots from your hand and pierces the flesh of your target."},ColdTouch:{Level:3,ManaCost:7,Name:"frost bite",Image:"spell_cold_touch",Type:x,Damage:{Min:2,Max:4},Duration:2,Description:"This spell inflicts cold, lasting damage to the creature you touch."},Fireball:{Level:5,ManaCost:11,Name:"fireball",Image:"spell_fireball",Sound:"spells/fireball",Type:x,Damage:{Min:6,Max:12},Duration:1,Description:"A burst of flame that briefly burns your enemy."},VampiricTouch:{Level:8,ManaCost:16,Name:"vampiric touch",Image:"spell_vampiric_touch",Sound:"spells/vampiric_touch",Type:x,Damage:{Min:4,Max:10},Vampiric:!0,Duration:1,Description:"This spell sucks a little bit of life from your target and transfers it to the caster."},ChainLightning:{Level:12,ManaCost:26,Name:"chain lightning",Image:"spell_chain_lightning",Type:x,Damage:{Min:1,Max:15},Duration:1,Target:j,MaxTargets:3,Description:"A lightning bolt hits a cluster of creatures that stand next to each other."},CircleOfDeath:{Level:16,ManaCost:59,Name:"circle of death",Image:"spell_circle_of_death",Type:x,Damage:{Min:5,Max:10},Duration:1,Target:C,Description:"A wave of necrotic energy emanates from the caster and inflicts damage to all the enemy nearby."},Moonbeam:{Level:18,ManaCost:79,Name:"moonbeam",Image:"spell_moonbeam",Type:x,Damage:{Min:3,Max:12},Duration:2,Target:C,MaxTargets:5,Description:"Beautiful rays of light magically appear and target the foes surrounding you."},FirstAid:{Level:1,ManaCost:4,Name:"first aid",Image:"spell_first_aid",Type:v,Heal:{Property:"Health",Min:4,Max:9},Duration:1,Description:"Slightly improves your health."},Alertness:{Level:3,ManaCost:6,Name:"alertness",Image:"spell_alertness",Type:v,Heal:{Property:"Stamina",Min:8,Max:16},Duration:3,Description:"Relieves some of your fatigue."},HealWounds:{Level:6,ManaCost:8,Name:"heal wounds",Image:"spell_heal_wounds",Type:v,Heal:{Property:"Health",Min:6,Max:16},Duration:1,Description:"Resorbs the most superficial injuries."},Regenerate:{Level:11,ManaCost:19,Name:"regenerate",Image:"spell_regenerate",Type:v,Heal:{Property:"Health",Min:6,Max:11},Duration:3,Description:"A powerful spell that heals you gradually."},TrueStrike:{Level:4,ManaCost:7,Name:"true strike",Image:"spell_true_strike",Type:k,Boost:{Property:"Damage",Type:"Fixed",Fixed:2},Duration:5,Description:"Your attacks temporarily inflict a little bit more damage."},BarkSkin:{Level:1,ManaCost:11,Name:"bark skin",Image:"spell_bark_skin",Sound:"spells/bark_skin",Type:k,Boost:{Property:"Armor",Type:"Percentage",Percentage:15},Duration:10,Description:"Your skin gets a wood-like quality that makes you more resistant to attacks for a while."},StoneSkin:{Level:3,ManaCost:19,Name:"stone skin",Image:"spell_stone_skin",Type:k,Boost:{Property:"Armor",Type:"Percentage",Percentage:40},Duration:15,Description:"This spell turns the outer layer of your body into stone, making it harder to hit you for some time."},Bless:{Level:2,ManaCost:13,Name:"bless",Image:"spell_bless",Type:k,Boost:{Property:"Damage",Type:"Max"},Duration:8,Description:"This mystical spell momentarily helps you inflict the most damage to your foes."},Blur:{Level:6,ManaCost:20,Name:"blur",Image:"spell_blur",Type:k,Boost:{Property:"Damage",Type:"Min"},Target:E,Duration:6},MirrorShield:{Level:10,ManaCost:36,Name:"mirror shield",Image:"spell_mirror_shield",Type:k,Damage:{Type:"Percentage",Percentage:20},Target:C,Duration:5},Berserk:{Level:15,ManaCost:41,Name:"berserk",Image:"spell_berserk",Type:k,Boost:{Property:"Strength",Type:"Absolute",Amount:10},Duration:5},Confusion:{Level:5,ManaCost:17,Name:"confusion",Image:"spell_confusion",Type:O,Effect:"Random",Duration:3},Entangle:{Level:9,ManaCost:18,Name:"entangle",Image:"spell_entangle",Type:O,Effect:"Immobilize",Duration:5},ShockingGrasp:{Level:13,ManaCost:25,Name:"shocking grasp",Image:"spell_shocking_grasp",Type:O,Effect:"Immobilize",Damage:{Min:3,max:5},Duration:2},Earthquake:{Level:16,ManaCost:69,Name:"earthquake",Image:"spell_earthquake",Type:O,Effect:"Immobilize",Target:C,Duration:3},CreateFood:{Level:3,ManaCost:9,Name:"create food",Image:"spell_create_food",Effect:"CreateFood"},DetectMonster:{Level:4,ManaCost:12,Name:"detect monster",Image:"spell_detect_monster",Effect:"DetectMonster"},FindTraps:{Level:7,ManaCost:14,Name:"Find traps",Image:"spell_find_traps",Effect:"FindTraps"},MistyStep:{Level:11,ManaCost:23,Name:"misty step",Image:"spell_misty_step",Sound:"spells/misty_step",Effect:"MistyStep"},Invisibility:{Level:14,ManaCost:78,Name:"invisibility",Image:"spell_invisibility",Effect:"Invisibility",Duration:12},GlobeOfInvulnerability:{Level:17,ManaCost:89,Name:"globe of invulnerability",Image:"spell_globe_of_invulnerability",Effect:"Invulnerability",Duration:5}},Bestiary:{WinterWolf:{},Hyena:{},PoisonousSnake:{},Boar:{},BlackBear:{},SwarmOfWasps:{},Kobold:{},Gnoll:{},Dryad:{},Bullywug:{},Lizard:{},GiantRat:{},EvilSpider:{},Troglodyte:{},DeepRothe:{},Zombie:{},Skeleton:{},Ghoul:{},HellHound:{},Mummy:{Name:"mummy",Level:1,Health:14,Damage:{Min:2,Max:5}},Banshee:{},LostSoul:{},Vampire:{},BoneDevil:{},Lich:{},PitFiend:{},Bandit:{},TribalWarrior:{},Assassin:{},Goblin:{Name:"goblin",Type:"Green Skin",Level:1,XP:15,Health:12,Damage:{Min:1,Max:4}},Hobgoblin:{Name:"hobgoblin",Type:"Green Skin",Level:1,XP:20,Health:11,Damage:{Min:2,Max:6}},Orc:{Name:"orc",Type:"Green Skin",Level:1,XP:20,Health:30,Damage:{Min:4,Max:7}},Troll:{},Dretch:{},HalfOgre:{},Ogre:{},Cyclops:{},Golem:{},StoneGiant:{},Acolyte:{},Sprite:{},Satyr:{},Elemental:{},Djinn:{},Harpy:{},Centaur:{},Manticore:{},Minotaur:{},Flumph:{},AnimatedTable:{}}},L={UserOS:window.navigator.userAgent.indexOf("Mac")>-1?"Mac":"Win",DevBuild:{Mac:"file:///Users/owner/Sites/dungeon/dev/index.html",Win:"file:///C:/Users/gurca/Documents/Projects/dungeon/dev/index.html"},StableBuild:{Mac:"file:///Users/owner/Sites/dungeon/stable/index.html",Win:"file:///C:/Users/gurca/Documents/Projects/dungeon/stable/index.html"},Debug:!0,DebugCreateCharacter:!1,SoundDebug:!1,DebugVolume:0,Cheats:{ShowFullMap:!0,NoClip:!0,GodMode:!0,CastAlwaysSucceeds:!0},ScreenSize:{MobileScreen:function(){return window.matchMedia("(max-width: 400px)").matches},TabletScreen:function(){return window.matchMedia("(max-width: 769px)").matches}},ScreenBreakpoints:{MobileScreen:400,TabletScreen:769},MaxEventLogEntries:5,ResponsiveMaxEventLogEntries:3,MaxSoundFilesPerFolder:10,StartMaxItems:5,DefaultSoundVolume:.3,MaxSpellLevel:18,NumberOfSpells:Object.keys(P.Spells).length,Equipable:["weapon","shield","helmet","necklace","ring","armor","boots","projectile"],WallMapVisibleRange:{x:10,y:7},WallMapVisibleRangeMobileScreen:{x:7,y:7},MapObjects:{Wall:"X",Door:"D",LootContainer:"L",Undiscovered:"U",Empty:" "},Directions:{North:{x:1,y:0},South:{x:1,y:2},West:{x:0,y:1},East:{x:2,y:1}},DirectionsOffset:{North:{x:0,y:-1},South:{x:0,y:1},West:{x:-1,y:0},East:{x:1,y:0}}},H=L.MapObjects,B=(H.Wall,H.Door,H.LootContainer,H.Undiscovered,H.Empty,Object(y.c)(S,{},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),N=(B.dispatch,function(e,t){return Object(d.a)(Object(d.a)(Object(d.a)({},e),t),{},{Styles:Object(d.a)({},e.Styles)})}),R={CreateCharacter:!0,Player:{x:10,y:14,Facing:"East",Health:19,Name:"Leto",Gear:{Head:null,Neck:null,Chest:null,LeftHand:P.Items.Sword,RightHand:null,LeftFinger:null,RightFinger:null,Feet:null,Quiver:null}},AvailableStartSpell:Object.keys(P.Spells).map((function(e){return P.Spells[e]})).filter((function(e){return 1===e.Level})),Backpack:{maxItems:10,ItemCount:{Max:10},Items:[Object(d.a)({},P.Items.ManaPotion),Object(d.a)({},P.Items.HealthPotion),Object(d.a)({},P.Items.StaminaPotion),Object(d.a)({},P.Items.ManaPotion),Object(d.a)({},P.Items.HealthPotion),Object(d.a)({},P.Items.StaminaPotion)]},Maps:{},LootContainers:[{x:10,y:13,Name:"skeleton",items:[Object(d.a)({},P.Items.HealthPotion),Object(d.a)({},P.Items.ManaPotion),Object(d.a)({},P.Items.ManaPotion)]},{x:17,y:9,Name:"dead body",items:[Object(d.a)({},P.Items.Apple),Object(d.a)({},P.Items.Bread)]},{x:16,y:15,Name:"small bag",items:[Object(d.a)({},P.Items.Rock),Object(d.a)({},P.Items.StaminaPotion)]},{x:11,y:20,Name:"chest",items:[Object(d.a)({},P.Items.HealthPotion),Object(d.a)({},P.Items.ManaPotion),Object(d.a)({},P.Items.Chicken),Object(d.a)({},P.Items.Bow)]}],Monsters:[Object(d.a)(Object(d.a)({},P.Bestiary.Orc),{},{x:12,y:14,Name:"cell keeper",Stationary:!0}),Object(d.a)(Object(d.a)({},P.Bestiary.Goblin),{},{x:14,y:7,Damage:{Min:5,Max:10}}),Object(d.a)(Object(d.a)({},P.Bestiary.Orc),{},{x:15,y:21,Health:70,Damage:{Min:15,Max:20}})],StartText:{text:"You slowly wake up. Ouch! Your head hurts...\n\n            Where are you?\n            \n            You try to examine your surroundings, but your eyes can't see a thing. It's too dark. Night time? There's not a star in the sky.\n            \n            A terrible stench makes you belch. What the hell is this putrid smell?! You must be in some sort of small enclosed space--a basement, without any window.\n            \n            You become aware of the fact that you are lying down. You raise your left arm and touch your head. Something hot above your left eyebrow--must be blood. Probably a bad wound.\n            \n            With much effort, you manage to get in an upright position and find a vertical wall behind you to support your back. Little by little, you slide up the wall and, finally, stand up."},Text:[{accessPoints:[{x:10,y:13,SingleTile:!0}],image:"bones",text:"As you take a few steps ahead of you, you stumble on something on the ground.\n\n                What the heck?\n\n                You bend towards the ground with caution. When your fingers can reach what's down there, you feel something porous and dry..."},{accessPoints:[{x:11,y:13},{x:11,y:14},{x:11,y:15}],text:"You're still trying to get your bearings but the darkness is too thick and too still.\n\n                Suddenly, you hear something. The sound resembles the jingle of a bunch of keys. Silence again. Then, a huge clang. You turn you head in the direction of the loud noise. A slit of bright light appears a few feet away. The tiny opening slowly becomes big and wide. The sound of rusty hinges turning on themselves, a deep and interminable complaint, makes you grind your teeth. Blinded by the intense brightness, you can only see a vague, dark shape in the middle of a rectangle of light.\n                \n                A guttural voice says 'Come with me.' You can hear a discernible accent. As your eyes start to catch sight of what's in front of you, you recognize the stout silhouette of a small orc. On his belt, a massive key ring.\n\n                Outside the cell, you hear torches crackling.\n\n                You can feel the orc staring at you. He lets a couple of menacing breaths out.\n\n                After some long seconds, you position your body towards the door, and take a step forward. The orc turns to let you out of this dingy, confined room.\n\n                Before the cellkeeper has time to set a safe distance between you and him, you run towards him and hit the creature in the face!\n                "},{accessPoints:[{x:14,y:14}],text:"Free at last! Run for your life!\n                "}],WallMap:[[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," ","X","X","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," ","X","X","X","X","X"," ","X","X","X","X","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," ","X"," "," "," ","X"," ","X"," "," "," ","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," ","X"," "," "," ","D"," ","D"," "," "," ","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," ","X"," "," "," ","X"," ","X"," "," "," ","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," ","X","X","X","X","X"," ","X","X","X","X","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," ","X"," ","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," ","X","X","X","X","X"," ","X","X","X","X","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," ","X"," "," "," ","X"," ","X"," "," "," ","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," ","X"," "," "," ","D"," ","D"," "," "," ","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," ","X"," "," "," ","X"," ","X"," "," "," ","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," ","X","X","X","X","X"," ","X","X","X","X","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," ","X"," ","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," ","X","D","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," ","X","X","X","X"," ","X","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," ","X"," "," "," "," "," ","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," ","X","X"," "," "," "," ","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," ","X","X"," "," "," ","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," ","X","X","X","X","X"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "]]},F={IndefiniteArticle:function(e,t){if(e){return isNaN(e)&&["a","e","i","u","o"].includes(e[0].toLowerCase())?t?"An":"an":t?"A":"a"}return""},RandomIntegerFromRange:function(e,t){return Math.floor(Math.random()*(Math.floor(t)-Math.floor(e)+1))+Math.floor(e)},RandomFloatFromRange:function(e,t){return Math.random()*(t-e+1)+e}},W=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("a",{href:this.props.href,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,style:this.props.style,target:this.props.target,title:this.props.title,children:this.props.children})}}]),a}(n.Component),G=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("br",null)}}]),a}(n.Component),_=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("span",this.props)}}]),a}(n.Component),U=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",this.props)}}]),a}(n.Component),X=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",this.props)}}]),a}(n.Component),Y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("img",Object.assign({alt:this.props.alt||this.props.title||""},this.props))}}]),a}(n.Component),V=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props.Styles);return r.a.createElement("h3",{style:e.H3,children:this.props.children})}}]),a}(n.Component),z=Object(h.b)(N)(V),K=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props.Styles);return r.a.createElement("h2",{style:e.H2,children:this.props.children})}}]),a}(n.Component),q=Object(h.b)(N)(K),J=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props.Styles);return r.a.createElement("h1",{style:e.H1,children:this.props.children})}}]),a}(n.Component),Z=Object(h.b)(N)(J),Q=a(95),$=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return null===this.props.image?null:r.a.createElement(Y,Object.assign({title:this.props.title},this.props))}}]),a}(n.Component),ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(U,{style:{clear:"both"}})}}]),a}(n.Component),te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(U,null,this.props.children)}}]),a}(n.Component),ae=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props.Styles);return r.a.createElement($,{draggable:!1,src:"./graphics/misc/Octocat.png",style:e.GitHubLogo,title:"GitHub repository"})}}]),a}(n.Component),ne=Object(h.b)(N)(ae),re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).NormalStyle=function(){var e=Object(d.a)({},n.props.Styles);n.setState({style:e.Link})},n.HoverStyle=function(){var e=Object(d.a)({},n.props.Styles);n.setState({style:e.LinkHover})},n.state={},n}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Styles,a=(e.dispatch,Object(Q.a)(e,["Styles","dispatch"]));return r.a.createElement(W,Object.assign({onMouseMove:this.HoverStyle,onMouseLeave:this.NormalStyle,style:this.state.style||t.Link},a))}}]),a}(n.Component),oe=Object(h.b)(N)(re),le=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props.Styles);return r.a.createElement(U,{style:e.Contact},r.a.createElement(_,null,r.a.createElement(_,null,"written by\xa0"),r.a.createElement(_,null,r.a.createElement(oe,{href:"mailto:gurcan.yves@gmail.com?subject=Dungeon!",title:"gurcan.yves@gmail.com",target:"_blank"},"Yves Gurcan"),r.a.createElement(oe,{href:"https://github.com/yvesgurcan/dungeon",target:"_blank"},r.a.createElement(ne,null)))))}}]),a}(n.Component),ie=Object(h.b)(N)(le),se=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentWillMount",value:function(){console.log("dev mode"),console.log("dev build url",L.DevBuild[L.UserOS]),console.log("stable build url",L.StableBuild[L.UserOS])}},{key:"shouldComponentUpdate",value:function(e){return e.CreateCharacter!==this.props.CreateCharacter||e.MobileScreen!==this.props.MobileScreen||e.TabletScreen!==this.props.TabletScreen}},{key:"render",value:function(){var e=Object(d.a)({},this.props).Styles;return r.a.createElement(U,{style:e.Header},r.a.createElement(Z,null,"Dungeon!"),r.a.createElement(q,null,"an adventure game in React"),r.a.createElement(te,null,window.location.href.includes("localhost")?r.a.createElement(_,null,"v","0.6.10-alpha"," (dev mode)"):r.a.createElement(_,null,"v","0.6.10-alpha"," ","dev",r.a.createElement(_,null," ","2020/08/23 22:38"))))}}]),a}(n.Component),ce=Object(h.b)(N)(se),pe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props.Styles);return r.a.createElement(_,null,r.a.createElement($,{draggable:this.props.draggable,src:this.props.image?"./graphics/items/"+this.props.image+".png":null,style:e.ItemImage}))}}]),a}(n.Component),ue=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).HoverStyle=function(){var e=Object(d.a)({},n.props.Styles);n.setState({style:e.ItemActionHover})},n.NormalStyle=function(){var e=Object(d.a)({},n.props.Styles);n.setState({style:e.ItemAction})},n.UseItem=function(){n.props.onClick(n.props.ItemAction)};var r=Object(d.a)({},n.props.Styles);return n.state={style:r.ItemAction},n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(U,{style:this.state.style,onMouseMove:this.HoverStyle,onMouseLeave:this.NormalStyle,onClick:this.UseItem},this.props.ItemAction.Name)}}]),a}(n.Component),me=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).RegisterTouch=function(){var e=Object(d.a)({},n.props.item);if(!Object.getOwnPropertyNames(e).length)return null;n.setState({TouchEvent:!0})},n.ToggleItemActions=function(e){var t=Object(d.a)({},n.props.item),a=Object(d.a)({},n.props).Slot;if(!Object.getOwnPropertyNames(t).length&&!a)return null;var r=Object(d.a)({},e);if(e.preventDefault(),n.props.NoActionMenu)return n.state.HideItemDescription?n.ShowItemDescription(r):n.HideItemDescription(),!1;var o=Object(d.a)({},r),l=o.pageX,i=o.pageY;n.setState({HideItemActions:!n.state.HideItemActions,HideItemDescription:!0,PreventHoverEvent:!0,x:l+5,y:i+5},(function(){document.addEventListener("click",this.HideItemActions,!1),document.addEventListener("contextmenu",this.HideItemActions,!1)}))},n.HideItemActions=function(){return!!n.Mounted&&(n.state.DescriptionAsAction?(document.addEventListener("click",n.HideItemDescription,!1),document.addEventListener("contextmenu",n.HideItemDescription,!1),n.setState({DescriptionAsAction:!1,CleanupDescriptionEventListener:!0}),!1):(n.setState({HideItemActions:!0,PreventHoverEvent:!1}),document.removeEventListener("click",n.HideItemActions,!1),void document.removeEventListener("contextmenu",n.HideItemActions,!1)))},n.ShowItemDescription=function(e){var t=Object(d.a)({},n.props.item),a=Object(d.a)({},n.props).Slot;if(!Object.getOwnPropertyNames(t).length&&!a)return null;var r=Object(d.a)({},e),o=r.pageX,l=r.pageY;if(null===e&&(o=n.state.x-5,l=n.state.y-5,n.setState({DescriptionAsAction:!0})),n.setState({HideItemActions:!0,HideItemDescription:!1,PreventHoverEvent:!0,x:o+5,y:l+5}),n.props.NoActionMenu)return document.addEventListener("click",n.HideItemDescription,!1),document.addEventListener("contextmenu",n.HideItemDescription,!1),!1;document.addEventListener("click",n.HideItemActions,!1),document.addEventListener("contextmenu",n.HideItemActions,!1)},n.HideItemDescription=function(){if(!n.Mounted)return!1;n.setState({HideItemDescription:!0,PreventHoverEvent:!1}),(n.props.NoActionMenu||n.state.CleanupDescriptionEventListener)&&(document.removeEventListener("click",n.HideItemDescription,!1),document.removeEventListener("contextmenu",n.HideItemDescription,!1),n.state.CleanupDescriptionEventListener&&n.setState({CleanupDescriptionEventListener:!1}))},n.ShowItemDescriptionOnHover=function(e){var t=Object(d.a)({},n.props.item),a=Object(d.a)({},n.props).Slot;if(!Object.getOwnPropertyNames(t).length&&!a)return null;if(n.state.TouchEvent)return!1;if(!n.state.PreventHoverEvent&&n.state.HideItemActions&&n.state.HideItemDescription){n.setState({HoveredOut:!1});var r=Object(d.a)({},e),o=r.pageX,l=r.pageY;setTimeout(function(){if(!this.state.HoveredOut&&this.state.HideItemActions&&this.state.HideItemDescription){if(!this.Mounted)return!1;this.setState({HideItemDescription:!1,x:o+5,y:l+5})}}.bind(Object(c.a)(n)),600)}},n.HideItemDescriptionOnHover=function(){n.state.PreventHoverEvent||n.setState({HideItemDescription:!0,HoveredOut:!0})},n.ShowHoverForItemAfterClick=function(e){n.state.ResetHover&&(n.ShowItemDescriptionOnHover(e),n.setState({ResetHover:!1}))},n.ItemDescription=function(){var e=Object(d.a)({},n.props.item),t=Object(d.a)({},n.props),a=t.Slot,o=t.Styles;return Object.getOwnPropertyNames(e).length||a?r.a.createElement(U,{hidden:n.state.HideItemDescription,style:Object(d.a)(Object(d.a)({},o.ItemDescription),{},{left:n.state.x,top:n.state.y})},r.a.createElement(U,{style:o.ItemDescriptionName},a?a+": "+(e.Name||"Empty"):e.Name),r.a.createElement(U,{style:o.ItemDescriptionContent,hidden:!e.Description},e.Description)):null},n.ItemActions=function(){var e=Object(d.a)({},n.props.item),t=Object(d.a)({},n.props),a=t.Slot,o=t.Styles;return Object.getOwnPropertyNames(e).length||a?r.a.createElement(U,{hidden:n.state.HideItemActions,style:Object(d.a)(Object(d.a)({},o.ItemActions),{},{left:n.state.x,top:n.state.y})},r.a.createElement(U,{style:o.ItemDescriptionName},a?a+": "+(e.Name||"Empty"):e.Name),n.AvailableActions().map((function(e){return r.a.createElement(ue,{key:e.Name,onClick:n.UseItem,ItemAction:e})}))):null},n.AvailableActions=function(){var e=Object(d.a)({},n.props.Item),t=n.props.Equipped,a=n.props.Loot;if(e){var r=e.Type,o=[{Name:"Description",onClick:"ShowItemDescription",BuiltInComponent:!0}];return a&&o.push({Name:"Take",onClick:"TakeSingleLoot",MainAction:!0}),"potion"===r&&o.push({Name:"Drink",onClick:"DrinkPotion",MainAction:!a}),"food"===r&&o.push({Name:"Eat",onClick:"ConsumeFood",MainAction:!a}),"scroll"===r&&o.push({Name:"Cast Spell",onClick:"UseScroll",MainAction:!a}),!t&&L.Equipable.indexOf(r)>-1&&o.push({Name:"Equip",onClick:"EquipItem"}),t&&o.push({Name:"Unequip",onClick:"UnequipItem"}),a||o.push({Name:"Drop",onClick:"DropItem"}),o}return[]},n.UseItem=function(e){if("ShowItemDescription"===e.onClick)return n.ShowItemDescription(null),!1;n.setState({Clicked:!0}),setTimeout(function(){if(this.setState({Clicked:!1,ResetHover:!0}),e.MainAction)return this.props.onClick(this.props.item),!1;this.props.UseItem(this.props.item,e.onClick)}.bind(Object(c.a)(n)),50)},n.onClick=function(){var e=Object(d.a)({},n.props.item);if(!Object.getOwnPropertyNames(e).length)return null;console.log({Item:e},n.props);var t=b()(n.props.Player,{$merge:{}});if(console.log(n.props.Player,t),n.props.dispatch({type:"USE_ITEM",Item:n.props.Player.Backpack.Items[0]}),!n.props.onClick)return console.warn("This feature is not ready yet :)"),null;n.setState({Clicked:!0}),setTimeout(function(){this.setState({Clicked:!1,ResetHover:!0}),this.props.onClick(this.props.item),this.HideItemActions(),this.HideItemDescription()}.bind(Object(c.a)(n)),50)},n.state={HideItemDescription:!0,HideItemActions:!0,Id:Math.floor(99999999999*Math.random())},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.Mounted=!0}},{key:"componentWillUnmount",value:function(){this.Mounted=!1}},{key:"render",value:function(){var e=Object(d.a)({},this.props.Styles);return r.a.createElement(U,{id:this.state.Id,style:e.ItemImageBlock,onContextMenu:this.ToggleItemActions,onMouseEnter:this.ShowItemDescriptionOnHover,onMouseLeave:this.HideItemDescriptionOnHover,onMouseMove:this.ShowHoverForItemAfterClick,onTouchStart:this.RegisterTouch},this.ItemDescription(),this.ItemActions(),r.a.createElement(U,null,r.a.createElement(U,{hidden:!this.state.Clicked,style:this.props.Loot?Object(d.a)(Object(d.a)({},e.ItemImageBlockClick),{},{top:document.getElementById(this.state.Id)?document.getElementById(this.state.Id).getBoundingClientRect().y+1:null,left:document.getElementById(this.state.Id)?document.getElementById(this.state.Id).getBoundingClientRect().x+1:null}):Object(d.a)(Object(d.a)({},e.ItemImageBlockClick),{},{top:document.getElementById(this.state.Id)?document.getElementById(this.state.Id).getBoundingClientRect().y+1:null,left:document.getElementById(this.state.Id)?document.getElementById(this.state.Id).getBoundingClientRect().x+1-document.getElementById(this.state.Id).scrollLeft:null})}),r.a.createElement(U,{onClick:this.onClick},r.a.createElement(pe,Object.assign({},this,this.props))),r.a.createElement(U,{style:e.ItemImageBlockNumber,hidden:!this.props.showIndex},this.props.index)))}}]),a}(n.Component),de=Object(h.b)(N)(me),he=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).NormalStyle=function(){var e=Object(d.a)({},n.props),t=e.SmallPadding,a=e.Styles;n.setState({style:t?a.ActionButtonSmallPadding:a.ActionButton})},n.HoverStyle=function(){var e=Object(d.a)({},n.props),t=e.SmallPadding,a=e.Styles;n.setState({style:t?a.ActionButtonHoverSmallPadding:a.ActionButtonHover})},n.onClick=function(){var e=Object(d.a)({},n.props),t=e.SmallPadding,a=e.Styles;n.setState({style:t?a.ActionButtonClickSmallPadding:a.ActionButtonClick});var r=Object(c.a)(n);if(setTimeout((function(){r.state.style!==a.ActionButtonClick&&r.state.style!==a.ActionButtonClickSmallPadding||r.setState({style:t?a.ActionButtonHoverSmallPadding:a.ActionButtonHover})}),50),!n.props.onClick)return console.warn("This feature is not ready yet :)"),null;n.props.onClick()};var r=Object(d.a)({},n.props),o=r.SmallPadding,l=r.StayClicked,i=r.Clicked,p=r.Styles;return n.state=l&&i?{style:o?p.ActionButtonHoverSmallPadding:p.ActionButtonHover}:{style:o?p.ActionButtonSmallPadding:p.ActionButton},n}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=Object(d.a)({},e),a=t.StayClicked,n=t.Clicked,r=t.SmallPadding,o=Object(d.a)({},this.props.Clicked),l=Object(d.a)({},this.props.SmallPadding),i=Object(d.a)({},this.props).Styles;if(a&&o&&!n){var s=Object(d.a)({},this.props).Styles;this.setState({style:r?s.ActionButtonSmallPadding:s.ActionButton})}a||r===l||this.setState({style:r?i.ActionButtonSmallPadding:i.ActionButton})}},{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Clicked,a=e.StayClicked;return r.a.createElement(U,{hidden:this.props.hidden,onClick:this.onClick,onMouseMove:this.HoverStyle,onMouseLeave:t&&a?null:this.NormalStyle,style:this.props.hidden?{display:"none"}:this.state.style},this.props.children)}}]),a}(n.Component),ye=Object(h.b)(N)(he),ge=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).NormalStyle=function(){var e=Object(d.a)({},n.props).Styles;n.setState({style:e.ArrowBlock})},n.HoverStyle=function(){var e=Object(d.a)({},n.props).Styles;n.setState({style:e.ArrowBlockHover})},n.onClick=function(){var e=Object(d.a)({},n.props).Styles;n.props.onClick(n.props.arrow),n.setState({style:e.ArrowBlockClick}),setTimeout(function(){this.state.style===e.ArrowBlockClick&&this.setState({style:e.ArrowBlockHover})}.bind(Object(c.a)(n)),50)};var r=Object(d.a)({},n.props).Styles;return n.state={style:r.ArrowBlock},n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(_,{onClick:this.onClick,onMouseMove:this.HoverStyle,onMouseLeave:this.NormalStyle,style:this.props.arrowStyle&&this.props.arrowStyle[this.props.arrow]?this.props.arrowStyle[this.props.arrow]:this.state.style},this.props.children)}}]),a}(n.Component),be=Object(h.b)(N)(ge),Se=L.Debug,fe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).RegisterTouch=function(){n.setState({TouchEvent:!0})},n.ShowToolTipOnClick=function(e){if(n.props.DisabledOnClick)return n.HideToolTipOnClick(),e.preventDefault(),!1;var t=Object(d.a)({},e),a=t.pageX,r=t.pageY;e.preventDefault(),n.setState({HideToolTip:!1,PreventHoverEvent:!0,x:a+5,y:r+5}),document.addEventListener("click",n.HideToolTipOnClick,!1),document.addEventListener("contextmenu",n.HideToolTipOnClick,!1)},n.HideToolTipOnClick=function(){if(!n.Mounted)return!1;n.setState({HideToolTip:!0,PreventHoverEvent:!1}),document.removeEventListener("click",n.HideToolTipOnClick,!1),document.removeEventListener("contextmenu",n.HideToolTipOnClick,!1)},n.ShowToolTipOnHover=function(e){if(n.state.TouchEvent)return!1;if(!n.state.PreventHoverEvent&&n.state.HideToolTip){n.setState({HoveredOut:!1});var t=Object(d.a)({},e),a=t.pageX,r=t.pageY;setTimeout(function(){if(!this.state.HoveredOut&&this.state.HideToolTip){if(!this.Mounted)return!1;this.setState({HideToolTip:!1,x:a+5,y:r+5})}}.bind(Object(c.a)(n)),600)}},n.HideToolTipOnHover=function(){n.state.PreventHoverEvent||n.setState({HideToolTip:!0,HoveredOut:!0})},n.ShowHoverAfterClick=function(e){n.ShowToolTipOnHover(e)},n.ToolTip=function(){var e=Object(d.a)({},n.props).Styles;return r.a.createElement(U,{hidden:n.state.HideToolTip,style:n.props.FlexibleWidth?Object(d.a)(Object(d.a)({},e.ToolTipFlexibleWidth),{},{left:n.state.x,top:n.state.y}):Object(d.a)(Object(d.a)({},e.ToolTip),{},{left:n.state.x,top:n.state.y})},r.a.createElement(U,null,n.props.ToolTip))},n.state={HideToolTip:!0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.Mounted=!0}},{key:"componentWillUnmount",value:function(){this.Mounted=!1}},{key:"shouldComponentUpdate",value:function(e,t){return t.HideToolTip!==this.state.HideToolTip||e.children!==this.props.children}},{key:"render",value:function(){return this.props.ToolTip&&""!==this.props.ToolTip||Se&&(!Se||this.props.ToolTip)?r.a.createElement(U,{style:this.props.style,onClick:this.ShowToolTipOnClick,onKeyUp:this.ShowToolTipOnClick,onContextMenu:this.ShowToolTipOnClick,onMouseEnter:this.ShowToolTipOnHover,onMouseLeave:this.HideToolTipOnHover,onMouseMove:this.ShowHoverAfterClick,onTouchStart:this.RegisterTouch},this.ToolTip(),this.props.children):r.a.createElement(U,{style:this.props.style},this.props.children)}}]),a}(n.Component),ve=Object(h.b)(N)(fe),xe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).onKeyPress=function(e){"Enter"===e.key&&e.target.blur()},n.onFocus=function(){var e=Object(d.a)({},n.props.Styles);n.setState({style:n.props.styleFocus||e.TextEditFocus})},n.onBlur=function(e){var t=Object(d.a)({},n.props.Styles);n.setState({style:n.props.style||t.TextEdit}),n.props.onBlur&&n.props.onBlur(e.target)};var r=Object(d.a)({},n.props.Styles);return n.state={style:n.props.style||r.TextEdit},n}return Object(p.a)(a,[{key:"onChange",value:function(e){this.props.onChange(e.target)}},{key:"render",value:function(){var e=this;return r.a.createElement("input",{hidden:this.props.hidden,name:this.props.name,placeholder:this.props.placeholder,value:this.props.value||"",style:this.state.style,maxLength:this.props.maxLength,onKeyPress:this.onKeyPress,onFocus:this.onFocus,onBlur:this.onBlur,onChange:function(t){return e.onChange(t)}})}}]),a}(n.Component),Oe=Object(h.b)(N)(xe),ke=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(t){e.props.onClick(t.target)},e.onChange=function(t){e.props.onChange(t.target)},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("textarea",{readOnly:this.props.readOnly,style:this.props.style,onChange:this.onChange,onClick:this.onClick,value:this.props.value})}}]),a}(n.Component),Ce=Object(h.b)(N)(ke),Ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(U,{style:this.props.Styles.CharacterHeader},r.a.createElement(z,null,"Create Your Character"))}}]),a}(n.Component),je=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(U,{style:this.props.Styles.CreateCharacterContainer})}}]),a}(n.Component),Me=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props.Player);return r.a.createElement(U,{style:this.props.Styles.CharacterCreateName},r.a.createElement(X,{style:this.props.Styles.PropertyLabelForInput},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.CharacterName,style:this.props.Styles.Inline},r.a.createElement(_,null,"Name:"))),r.a.createElement(X,{style:this.props.Styles.PropertyFieldForInput},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.CharacterName,style:this.props.Styles.Inline},r.a.createElement(Oe,{style:this.props.Styles.TextEditUnderline,styleFocus:this.props.Styles.TextEditUnderlineFocus,name:"Name",placeholder:"Enter your name.",value:e.Name,maxLength:13,onChange:this.props.SavePlayerName}))),r.a.createElement(X,{style:this.props.Styles.PropertyLabel},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Vitals.Health,style:this.props.Styles.Inline},r.a.createElement(_,null,"Health:"))),r.a.createElement(X,{style:this.props.Styles.PropertyField},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Vitals.Health,style:this.props.Styles.Inline},r.a.createElement(_,null,e.MaxHealth))),r.a.createElement(X,{style:this.props.Styles.PropertyLabel},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Vitals.Mana,style:this.props.Styles.Inline},r.a.createElement(_,null,"Mana:"))),r.a.createElement(X,{style:this.props.Styles.PropertyField},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Vitals.Mana,style:this.props.Styles.Inline},r.a.createElement(_,null,e.MaxMana))),r.a.createElement(X,{style:this.props.Styles.PropertyLabel},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Vitals.Stamina,style:this.props.Styles.Inline},r.a.createElement(_,null,"Stamina:"))),r.a.createElement(X,{style:this.props.Styles.PropertyField},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Vitals.Stamina,style:this.props.Styles.Inline},r.a.createElement(_,null,e.MaxStamina))))}}]),a}(n.Component),Te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object.assign({},this.props.Player);return r.a.createElement(U,{style:this.props.Styles.CharacterCreateView},r.a.createElement(X,{style:this.props.Styles.PropertyLabel},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Abilities.Strength,style:this.props.Styles.Inline},r.a.createElement(_,null,"Strength:"))),r.a.createElement(X,{style:this.props.Styles.PropertyField},r.a.createElement(_,null,r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Abilities.Strength,style:this.props.Styles.Inline},e.Strength-(e.Race.AbilityBoost.Strength||0)),r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.AbilityBonus,style:this.props.Styles.Inline},e.Race.AbilityBoost.Strength?" +"+e.Race.AbilityBoost.Strength:null))),r.a.createElement(X,{style:this.props.Styles.PropertyLabel},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Abilities.Dexterity,style:this.props.Styles.Inline},r.a.createElement(_,null,"Dexterity:"))),r.a.createElement(X,{style:this.props.Styles.PropertyField},r.a.createElement(_,null,r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Abilities.Dexterity,style:this.props.Styles.Inline},e.Dexterity-(e.Race.AbilityBoost.Dexterity||0)),r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.AbilityBonus,style:this.props.Styles.Inline},e.Race.AbilityBoost.Dexterity?" +"+e.Race.AbilityBoost.Dexterity:null))),r.a.createElement(X,{style:this.props.Styles.PropertyLabel},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Abilities.Constitution,style:this.props.Styles.Inline},r.a.createElement(_,null,"Constitution:"))),r.a.createElement(X,{style:this.props.Styles.PropertyField},r.a.createElement(_,null,r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Abilities.Constitution,style:this.props.Styles.Inline},e.Constitution-(e.Race.AbilityBoost.Constitution||0)),r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.AbilityBonus,style:this.props.Styles.Inline},e.Race.AbilityBoost.Constitution?" +"+e.Race.AbilityBoost.Constitution:null))),r.a.createElement(X,{style:this.props.Styles.PropertyLabel},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Abilities.Intelligence,style:this.props.Styles.Inline},r.a.createElement(_,null,"Intelligence:"))),r.a.createElement(X,{style:this.props.Styles.PropertyField},r.a.createElement(_,null,r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Abilities.Intelligence,style:this.props.Styles.Inline},e.Intelligence-(e.Race.AbilityBoost.Intelligence||0)),r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.AbilityBonus,style:this.props.Styles.Inline},e.Race.AbilityBoost.Intelligence?" +"+e.Race.AbilityBoost.Intelligence:null))),r.a.createElement(X,null),r.a.createElement(X,{style:this.props.Styles.RollAbilities},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Buttons.Reroll,style:this.props.Styles.Inline},r.a.createElement(ye,{onClick:this.props.GeneratePlayerStats},"Reroll"))),r.a.createElement(X,null))}}]),a}(n.Component),Ie=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).SelectRace=function(t){var a=Object(d.a)({},e.props.Player),n=P.Races,r="",o=0;Object.keys(n).filter((function(e,t){return e===a.Race.Id&&(o=t,!0)})),a.Race="Left"===t?n[Object.keys(n).filter((function(e,t){return(0===o&&t===Object.keys(n).length-1||t===o-1)&&(r=e,!0)}))[0]]:n[Object.keys(n).filter((function(e,t){return(o+2>Object.keys(n).length&&0===t||t===o+1)&&(r=e,!0)}))[0]],e.props.SetRace(Object(d.a)(Object(d.a)({},a.Race),{},{Id:r}))},e.SelectClass=function(t){var a=Object(d.a)({},e.props.Player),n=P.Classes,r="",o=0;Object.keys(n).filter((function(e,t){return e===a.Class.Id&&(o=t,!0)})),a.Class="Left"===t?n[Object.keys(n).filter((function(e,t){return(0===o&&t===Object.keys(n).length-1||t===o-1)&&(r=e,!0)}))[0]]:n[Object.keys(n).filter((function(e,t){return(o+2>Object.keys(n).length&&0===t||t===o+1)&&(r=e,!0)}))[0]],e.props.SetClass(Object(d.a)(Object(d.a)({},a.Class),{},{Id:r}))},e.SelectFirstSpell=function(t){var a=Object(d.a)({},e.props.Player),n=R.AvailableStartSpell,r=0;n.filter((function(e,t){return e===a.SpellBook.Spells[0]&&(r=t,!0)})),"Left"===t?a.SpellBook.Spells[0]=r-1<0?n[n.length-1]:n[r-1]:r+1>n.length-1?a.SpellBook.Spells[0]=n[0]:a.SpellBook.Spells[0]=n[r+1],e.props.SetFirstSpell(a.SpellBook)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props.Player),t=null;return e.SpellBook&&e.SpellBook.Spells&&(t=Object(d.a)({},e.SpellBook.Spells[0])),r.a.createElement(U,{style:this.props.Styles.CharacterCreateBackground},r.a.createElement(X,{style:Object(d.a)(Object(d.a)({},this.props.Styles.PropertyLabel),{},{paddingTop:"8px"})},r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Race,style:this.props.Styles.Inline},r.a.createElement(_,null,"Race:"))),r.a.createElement(X,{style:this.props.Styles.PropertyField},r.a.createElement(X,{style:this.props.Styles.FlexBoxContainer},r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Arrows.Race,style:this.props.Styles.Inline},r.a.createElement(be,Object.assign({},this.props,{onClick:this.SelectRace,arrow:"Left"}),"\u2190")),r.a.createElement(X,{style:{flexGrow:"1",flexBasis:"auto",textAlign:"center",margin:"auto"}},r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Race,style:this.props.Styles.Inline},r.a.createElement(_,null,e.Race.Name))),r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Arrows.Race,style:this.props.Styles.Inline},r.a.createElement(be,Object.assign({},this.props,{onClick:this.SelectRace,arrow:"Right"}),"\u2192")))),r.a.createElement(X,{style:Object(d.a)(Object(d.a)({},this.props.Styles.PropertyLabel),{},{paddingTop:"8px"})},r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Class,style:this.props.Styles.Inline},r.a.createElement(_,null,"Class:"))),r.a.createElement(X,{style:this.props.Styles.PropertyField},r.a.createElement(X,{style:this.props.Styles.FlexBoxContainer},r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Arrows.Class,style:this.props.Styles.Inline},r.a.createElement(be,Object.assign({},this.props,{onClick:this.SelectClass,arrow:"Left"}),"\u2190")),r.a.createElement(X,{style:{flexGrow:"1",flexBasis:"auto",textAlign:"center",margin:"auto"}},r.a.createElement(_,null,r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Class,style:this.props.Styles.Inline},e.Class.Name))),r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Arrows.Class,style:this.props.Styles.Inline},r.a.createElement(be,Object.assign({},this.props,{onClick:this.SelectClass,arrow:"Right"}),"\u2192")))),r.a.createElement(X,{style:Object(d.a)(Object(d.a)({},this.props.Styles.PropertyLabel),{},{paddingTop:"10px"}),hidden:!e.Class.Spellcaster||!R.AvailableStartSpell},r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.FirstSpell,style:this.props.Styles.Inline},r.a.createElement(_,null,"Spell:"))),r.a.createElement(X,{style:this.props.Styles.PropertyField,hidden:!e.Class.Spellcaster||!R.AvailableStartSpell},r.a.createElement(X,{style:this.props.Styles.FlexBoxContainer},r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Arrows.Spell,style:this.props.Styles.Inline},r.a.createElement(X,{style:{marginTop:"3px"}},r.a.createElement(be,Object.assign({},this.props,{onClick:this.SelectFirstSpell,arrow:"Left"}),"\u2190"))),r.a.createElement(X,{style:{flexGrow:"1",flexBasis:"auto",marginLeft:"8px"}},r.a.createElement(de,{draggable:!1,image:t&&t.Image||null,name:t&&t.Name||null,item:t,NoActionMenu:!0,onClick:null})),r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Arrows.Spell,style:this.props.Styles.Inline},r.a.createElement(X,{style:{marginTop:"3px"}},r.a.createElement(be,Object.assign({},this.props,{onClick:this.SelectFirstSpell,arrow:"Right"}),"\u2192"))))))}}]),a}(n.Component),we=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props.Player);return r.a.createElement(U,{style:this.props.Styles.CreateCharacterDescription},r.a.createElement(X,{style:this.props.Styles.Paragraph},r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Race,style:this.props.Styles.Inline},e.Race.Description)),r.a.createElement(X,{style:this.props.Styles.Paragraph},r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Race,style:this.props.Styles.Inline},e.Class.Description)))}}]),a}(n.Component),De=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(U,{style:this.props.Styles.StartGame},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Buttons.ResumeGame,style:this.props.Styles.Inline},r.a.createElement(ye,{onClick:this.props.ResumeGame,hidden:!this.props.GameInBackground},"Resume Game")),r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Buttons.PlayGame,style:this.props.Styles.Inline},r.a.createElement(ye,{onClick:this.props.StartPlaying},"Let's play")))}}]),a}(n.Component),Ae=function(e){return r.a.createElement(U,{style:e.Styles.CreatePlayer},r.a.createElement(ce,null),r.a.createElement(ie,null),r.a.createElement(je,e),r.a.createElement(Ee,e),r.a.createElement(Me,e),r.a.createElement(Te,e),r.a.createElement(Ie,e),r.a.createElement(we,e),r.a.createElement(De,e))},Pe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props).Styles;return r.a.createElement(U,{style:e.TopGameBackgroundImage})}}]),a}(n.Component),Le=Object(h.b)(N)(Pe),He=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props).Styles;return r.a.createElement(U,{style:e.BottomGameBackgroundImage})}}]),a}(n.Component),Be=Object(h.b)(N)(He),Ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props).Styles;return r.a.createElement(U,{style:e.GameStateBackgroundImage})}}]),a}(n.Component),Re=Object(h.b)(N)(Ne),Fe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Styles,a=e.Responsiveness;return r.a.createElement(U,{style:t.ClearLog},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Buttons.ClearLog,style:t.Inline},r.a.createElement(ye,{SmallPadding:a.MobileScreen,onClick:this.props.ClearLog},a.MobileScreen?r.a.createElement(_,null,"X"):r.a.createElement(_,null,"Clear Log"))))}}]),a}(n.Component),We=Object(h.b)(N)(Fe),Ge=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(t){var a=document.getElementById("EventLog"),n=a.clientHeight/2,r=1;t.clientY-a.getBoundingClientRect().y<n&&(r=-1),a.scrollHeight<=a.getBoundingClientRect().height||1===r&&Math.floor(a.scrollTop)===Math.floor(a.scrollHeight-a.getBoundingClientRect().height)?e.props.DisplayCustomLogEntryInput(t):e.props.Scroll("EventLog",r)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props).Styles,t=Object.assign([],this.props.EventLog);return r.a.createElement(U,{style:e.EventLog,onClick:this.onClick},r.a.createElement(U,{id:"EventLog",style:e.EventLogContainer},r.a.createElement(U,null,t?t.map((function(e,t){return r.a.createElement(U,{key:t},e)})):null),r.a.createElement(U,{style:e.CustomLogEntryInputContainer},r.a.createElement(Oe,{style:Object(d.a)(Object(d.a)({},e.TextEdit),{},{width:"calc(100% - "+2*e.TextEdit.padding.replace("px","")+"px)"}),styleFocus:Object(d.a)(Object(d.a)({},e.TextEditFocus),{},{width:"calc(100% - "+2*e.TextEdit.padding.replace("px","")+"px)"}),hidden:!this.props.EnterCustomLogEntry,name:"CustomLogEntry",value:this.props.CustomLogEntry,placeholder:"You can add an entry to your log here.",onChange:this.props.StoreCustomLogEntryInput,onBlur:this.props.SaveCustomLogEntryInput}))))}}]),a}(n.Component),_e=Object(h.b)(N)(Ge),Ue=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Styles,a=e.Story;return r.a.createElement(U,{style:t.Story,hidden:a.Text.length>0&&""===a.Text},r.a.createElement(U,{style:t.Paragraph},a.Text?"function"!==typeof a.Text.split?a.Text:a.Text.split("\n").map((function(e,t){return r.a.createElement(_,{key:t},e,r.a.createElement(G,null))})):null),r.a.createElement(U,{hidden:!a.Image},r.a.createElement(Y,{draggable:!1,src:"./graphics/story/"+a.Image+".png",style:t.Paragraph})))}}]),a}(n.Component),Xe=Object(h.b)(N)(Ue),Ye=L.Directions,Ve=Ye.North,ze=Ye.South,Ke=Ye.West,qe=Ye.East,Je=L.MapObjects,Ze=Je.Wall,Qe=Je.Door,$e=Je.LootContainer,et=Je.Empty,tt=Object(d.a)({},L.WallMapVisibleRange),at=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).DrawMap=function(){var e=Object(i.a)(n.props.Maps.WallMap),t=Object(i.a)(n.props.Maps.WallMapRevealed),a=Object(d.a)({},n.props),o=a.Player,l=a.Styles;return t.map((function(t,a){return o.y+tt.y>=a&&o.y-tt.y<=a?r.a.createElement(U,{key:a,style:l.MapRow},t.map((function(t,i){var s=e[a][i];return o.x+tt.x>=i&&o.x-tt.x<=i?r.a.createElement(_,{key:i,style:l.MapObject,title:[i,a].join(",")},n.DrawMonster({x:i,y:a})||n.DrawMapObject(s,t,i,a)):r.a.createElement(_,{key:i},et)}))):r.a.createElement(U,{key:a},et)}))},n.DrawMonster=function(e){var t=e.x,a=e.y,o=Object(i.a)(n.props.Maps.MonsterMap),l=n.props.ShowFullMap,s=Object(d.a)({},n.props),c=s.Player,p=s.Styles;return(l||t>=c.x-1&&t<=c.x+1&&a>=c.y-1&&a<=c.y+1)&&o[a][t]!==et?t===c.x&&a===c.y?null:r.a.createElement(U,{style:p.Monster}):null},n.DrawMapObject=function(e,t,a,o){var l=n.props.ShowFullMap,s=Object(i.a)(n.props.Maps.WallMap),c=Object(i.a)(n.props.Maps.WallMapRevealed),p=Object(i.a)(n.props.Maps.DiscoveryMap),u=Object(i.a)(n.props.Maps.LootMap),m=Object(d.a)({},n.props),h=m.Player,y=m.Styles;if(a===h.x&&o===h.y)return r.a.createElement(U,{id:"you-are-here",style:y.Player});if(t===e||l){if(e===Ze||e===Qe){var g=o-1>=0?s[o-1].slice(a-1,a+2):[Ze,Ze,Ze],b=s[o].slice(a-1,a+2),S=o+1<s.length?s[o+1].slice(a-1,a+2):[Ze,Ze,Ze];0===a?(g=[et,s[o-1][a],s[o-1][a+1]],b=[et,s[o][a],s[o][a+1]],S=[et,s[o+1][a],s[o+1][a+1]]):a===s[o].length-1&&(g=[s[o-1][a-1],s[o-1][a],et],b=[s[o-1][a-1],s[o][a],et],S=[s[o-1][a-1],s[o+1][a],et]);var f=[g,b,S];if(e===Ze)return n.DrawWall(f,e);if(e===Qe)return n.DrawDoor(f,e)}else if(u[o][a]===$e&&(p[o][a]===et||l))return r.a.createElement(U,{style:y.Loot});return r.a.createElement(U,{style:{textAlign:"center"}},e)}if(n.DetectWallInVicinityOfActor(a,o,h.x,h.y)){if(c[o][a]=s[o][a],e===Ze||e===Qe){var v=o-1>=0?s[o-1].slice(a-1,a+2):[Ze,Ze,Ze],x=s[o].slice(a-1,a+2),O=o+1<s.length?s[o+1].slice(a-1,a+2):[Ze,Ze,Ze];0===a?(v=[et,s[o-1][a],s[o-1][a+1]],x=[et,s[o][a],s[o][a+1]],O=[et,s[o+1][a],s[o+1][a+1]]):a===s[o].length-1&&(v=[s[o-1][a-1],s[o-1][a],et],x=[s[o-1][a-1],s[o][a],et],O=[s[o-1][a-1],s[o+1][a],et]);var k=[v,x,O];if(e===Ze)return n.DrawWall(k,e);if(e===Qe)return n.DrawDoor(k,e)}return s[o][a]}return et},n.DrawWall=function(e,t){var a=Object(d.a)({},n.props).Styles,o=0;return e.map((function(e){return e.map((function(e){return e===et&&o++,null})),null})),8===o?r.a.createElement(U,{style:a.Wall.Pillar}):0===o?et:e[Ve.y][Ve.x]!==Ze&&e[Ve.y][Ve.x]!==Qe||e[qe.y][qe.x]!==Ze&&e[qe.y][qe.x]!==Qe||e[Ke.y][Ke.x]!==Ze&&e[Ke.y][Ke.x]!==Qe||e[Ve.y][qe.x]!==Ze&&e[Ve.y][qe.x]!==Qe?e[Ve.y][Ve.x]!==Ze&&e[Ve.y][Ve.x]!==Qe||e[ze.y][ze.x]!==Ze&&e[ze.y][ze.x]!==Qe||e[qe.y][qe.x]!==Ze&&e[qe.y][qe.x]!==Qe||e[ze.y][qe.x]!==Ze&&e[ze.y][qe.x]!==Qe?e[Ve.y][Ve.x]!==Ze&&e[Ve.y][Ve.x]!==Qe||e[ze.y][ze.x]!==Ze&&e[ze.y][ze.x]!==Qe||e[qe.y][qe.x]!==Ze&&e[qe.y][qe.x]!==Qe?e[Ve.y][Ve.x]!==Ze&&e[Ve.y][Ve.x]!==Qe||e[ze.y][ze.x]!==Ze&&e[ze.y][ze.x]!==Qe||e[Ke.y][Ke.x]!==Ze&&e[Ke.y][Ke.x]!==Qe?e[Ve.y][Ve.x]!==Ze&&e[Ve.y][Ve.x]!==Qe||e[qe.y][qe.x]!==Ze&&e[qe.y][qe.x]!==Qe?e[ze.y][ze.x]!==Ze&&e[ze.y][ze.x]!==Qe||e[Ke.y][Ke.x]!==Ze&&e[Ke.y][Ke.x]!==Qe?e[ze.y][ze.x]!==Ze&&e[ze.y][ze.x]!==Qe||e[qe.y][qe.x]!==Ze&&e[qe.y][qe.x]!==Qe?e[Ve.y][Ve.x]!==Ze&&e[Ve.y][Ve.x]!==Qe||e[Ke.y][Ke.x]!==Ze&&e[Ke.y][Ke.x]!==Qe?e[Ve.y][Ve.x]!==Ze&&e[Ve.y][Ve.x]!==Qe||e[ze.y][ze.x]!==Ze&&e[ze.y][ze.x]!==Qe?e[Ke.y][Ke.x]!==Ze&&e[Ke.y][Ke.x]!==Qe||e[qe.y][qe.x]!==Ze&&e[qe.y][qe.x]!==Qe?t:r.a.createElement(U,{style:a.Wall.WestToEast}):r.a.createElement(U,{style:a.Wall.NorthToSouth}):r.a.createElement(U,{style:a.Wall.NorthToWest}):r.a.createElement(U,{style:a.Wall.SouthToEast}):r.a.createElement(U,{style:a.Wall.SouthToWest}):r.a.createElement(U,{style:a.Wall.NorthToEast}):r.a.createElement(U,{style:a.Wall.TShapedWallNSW},r.a.createElement(U,{style:a.Wall.NorthSouthAndWest})):r.a.createElement(U,{style:a.Wall.TShapedWallNSE},r.a.createElement(U,{style:a.Wall.NorthSouthAndEast})):r.a.createElement(U,{style:a.Wall.NorthSouthEastAndSouthEast}):r.a.createElement(U,{style:a.Wall.NorthWestEastAndNorthWest})},n.DrawDoor=function(e,t){var a=Object(d.a)({},n.props).Styles;return e[Ve.y][Ve.x]!==Ze&&e[Ve.y][Ve.x]!==Qe||e[ze.y][ze.x]!==Ze&&e[ze.y][ze.x]!==Qe?e[Ke.y][Ke.x]!==Ze&&e[Ke.y][Ke.x]!==Qe||e[qe.y][qe.x]!==Ze&&e[qe.y][qe.x]!==Qe?t:r.a.createElement(U,{style:a.Door.WestToEast}):r.a.createElement(U,{style:a.Door.NorthToSouth})},n.DetectWallInVicinityOfActor=function(e,t,a,n){return e===a&&(t===n+1||t===n-1)||t===n&&(e===a+1||e===a-1)||!(t!==n+1&&t!==n-1||e!==a+1&&e!==a-1)},n.onClick=function(e){e.preventDefault();var t=e.clientX,a=e.clientY,r=document.getElementById("you-are-here").getBoundingClientRect(),o={x:null,y:null};t-r.width/2>r.x?o.x="East":t-r.width/2<=r.x&&(o.x="West"),a-r.height/2>r.y?o.y="South":a-r.height/2<=r.y&&(o.y="North");var l,i=t-r.x-r.width/2,s=a-r.y-r.height/2;"North"===o.y&&(i<=0&&i>s&&(l=o.y),i>0&&i<-1*s&&(l=o.y)),"South"===o.y&&(i<=0&&-1*i<s&&(l=o.y),i>0&&i<s&&(l=o.y)),"West"===o.x&&(s<=0&&i<s&&(l=o.x),s>0&&-1*i>s&&(l=o.x)),"East"===o.x&&(s<=0&&i>-1*s&&(l=o.x),s>0&&i>s&&(l=o.x)),void 0!==typeof l&&(n.props.MovePlayer(l),"North"===l&&n.props.onClickArrow("ArrowUp"),"South"===l&&n.props.onClickArrow("ArrowDown"),"West"===l&&n.props.onClickArrow("ArrowLeft"),"East"===l&&n.props.onClickArrow("ArrowRight"))},n.state={},n}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props).Styles;return r.a.createElement(U,{style:e.Map,onClick:this.onClick,onMouseDown:this.onMouseDown},this.DrawMap())}}]),a}(n.Component),nt=Object(h.b)(N)(at),rt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props).Styles;return r.a.createElement(U,{style:e.Accessories,hidden:!!this.props.MobileScreen&&this.props.HideInventory})}}]),a}(n.Component),ot=Object(h.b)(N)(rt),lt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Styles,a=e.Item,n=e.Slot;return a?r.a.createElement(U,{style:t.ReadyItem},r.a.createElement(de,Object.assign({onClick:this.onClick,image:a&&a.image||null,Slot:n,item:a,Equipped:!0},this.props))):r.a.createElement(U,{style:t.ReadyItem},r.a.createElement(de,{image:null,Slot:n,NoActionMenu:!0}))}}]),a}(n.Component),it=Object(h.b)(N)(lt),st=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props.Player.Gear);return r.a.createElement(U,null,r.a.createElement(it,{Slot:"Left hand",Item:e.LeftHand}),r.a.createElement(it,{Slot:"Right hand",Item:e.RightHand}))}}]),a}(n.Component),ct=Object(h.b)(N)(st),pt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Player,a=e.Styles;return r.a.createElement(U,{style:a.PlayerStats0},r.a.createElement(U,null,r.a.createElement(_,null,t.Name)),r.a.createElement(U,{style:a.ReadyItemBlock},r.a.createElement(ct,null)))}}]),a}(n.Component),ut=Object(h.b)(N)(pt),mt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props).Styles;return r.a.createElement(U,null,r.a.createElement(ve,{FlexibleWidth:!0,ToolTip:r.a.createElement(U,null,r.a.createElement(U,null,this.props.Metric,":"," ",this.props.ratio||this.props.current+"/"+this.props.max),r.a.createElement(U,null,this.props.Description))},this.props.ShowLabel?this.props.Metric:null,r.a.createElement(U,{style:e.StatBar},r.a.createElement(U,{style:this.props.style}))))}}]),a}(n.Component),dt=Object(h.b)(N)(mt),ht=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Player,a=e.Styles,n=Object(d.a)(Object(d.a)({},a.HealthBar),{},{width:Math.min(100,t.Health.Current/t.Health.Max*100)+"%"});return r.a.createElement(U,null,r.a.createElement(dt,{Metric:"Health",ShowLabel:!0,style:n,max:t.Health.Max,current:t.Health.Current,Description:f.Help.Vitals.Health}))}}]),a}(n.Component),yt=Object(h.b)(N)(ht),gt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Player,a=e.Styles,n=Object(d.a)(Object(d.a)({},a.ManaBar),{},{width:Math.min(100,t.Mana.Current/t.Mana.Max*100)+"%"});return r.a.createElement(U,null,r.a.createElement(dt,{Metric:"Mana",ShowLabel:!0,style:n,max:t.Mana.Max,current:t.Mana.Current}))}}]),a}(n.Component),bt=Object(h.b)(N)(gt),St=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Player,a=e.Styles,n=Object(d.a)(Object(d.a)({},a.StaminaBar),{},{width:Math.min(100,Math.ceil(t.Stamina.Current/t.Stamina.Max*100))+"%"});return r.a.createElement(U,null,r.a.createElement(dt,{Metric:"Stamina",ShowLabel:!0,style:n,ratio:n.width}))}}]),a}(n.Component),ft=Object(h.b)(N)(St),vt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Styles,a=e.Player;return r.a.createElement(U,{style:t.PlayerVitals},r.a.createElement(U,{style:t.PlayerStat},r.a.createElement(yt,null)),r.a.createElement(U,{style:t.PlayerStat,hidden:!a.Class||!a.Class.Spellcaster},r.a.createElement(bt,null)),r.a.createElement(U,{style:t.PlayerStat},r.a.createElement(ft,null)))}}]),a}(n.Component),xt=Object(h.b)(N)(vt),Ot=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).MovePlayer=function(){(0,e.props.MovePlayer)("North")},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(be,Object.assign({},this.props,{onClick:this.MovePlayer,arrow:"ArrowUp"}),"\u2191")}}]),a}(n.Component),kt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).MovePlayer=function(){(0,e.props.MovePlayer)("West")},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(be,Object.assign({},this.props,{onClick:this.MovePlayer,arrow:"ArrowLeft"}),"\u2190")}}]),a}(n.Component),Ct=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).MovePlayer=function(){(0,e.props.MovePlayer)("East")},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(be,Object.assign({},this.props,{onClick:this.MovePlayer,arrow:"ArrowRight"}),"\u2192")}}]),a}(n.Component),Et=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).MovePlayer=function(){(0,e.props.MovePlayer)("South")},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(be,Object.assign({},this.props,{onClick:this.MovePlayer,arrow:"ArrowDown"}),"\u2193")}}]),a}(n.Component),jt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props).Styles;return r.a.createElement(U,{style:e.ArrowContainer},r.a.createElement(U,{style:e.ArrowRow},r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Arrows.North,style:e.Inline},r.a.createElement(Ot,this.props))),r.a.createElement(U,{style:e.ArrowRow},r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Arrows.West,style:e.Inline},r.a.createElement(kt,this.props)),r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Arrows.East,style:e.Inline},r.a.createElement(Ct,this.props))),r.a.createElement(U,{style:e.ArrowRow},r.a.createElement(ve,{DisabledOnClick:!0,FlexibleWidth:!0,ToolTip:f.Help.Arrows.South,style:e.Inline},r.a.createElement(Et,this.props))))}}]),a}(n.Component),Mt=Object(h.b)(N)(jt),Tt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Player,a=e.Styles,n=e.MobileScreen,o=e.TabletScreen;return r.a.createElement(U,{style:n||o?a.PlayerStats2Block1:a.PlayerStats3,hidden:!!this.props.MobileScreen&&this.props.HideStats},r.a.createElement(U,{style:a.PlayerStat},r.a.createElement(ve,{ToolTip:t.Class.Spellcaster?f.Help.LevelSpellcaster:f.Help.LevelNotSpellcaster,style:a.Inline},r.a.createElement(_,null,n?r.a.createElement(_,null,"LVL"):r.a.createElement(_,null,"Level"),":"," "),r.a.createElement(_,null,t.Level))),r.a.createElement(U,{style:a.PlayerStat},r.a.createElement(ve,{ToolTip:f.Help.XP,style:a.Inline},r.a.createElement(_,null,"XP: "),r.a.createElement(_,null,t.XP))),r.a.createElement(U,{style:a.PlayerStat},r.a.createElement(ve,{ToolTip:f.Help.ArmorClass,style:a.Inline},r.a.createElement(_,null,"AC: "),r.a.createElement(_,null,t.ArmorClass))))}}]),a}(n.Component),It=Object(h.b)(N)(Tt),wt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Player,a=e.Styles,n=e.MobileScreen,o=e.TabletScreen;return r.a.createElement(U,{style:n||o?a.PlayerStats2Block2:a.PlayerAttributesStacked,hidden:!!this.props.MobileScreen&&this.props.HideStats},r.a.createElement(U,{style:a.PlayerStat},r.a.createElement(ve,{ToolTip:f.Help.Abilities.Strength,style:a.Inline},r.a.createElement(_,null,n?r.a.createElement(_,null,"STR"):r.a.createElement(_,null,"Strength"),":"," "),r.a.createElement(_,null,t.Strength))),r.a.createElement(U,{style:a.PlayerStat},r.a.createElement(ve,{ToolTip:f.Help.Abilities.Constitution,style:a.Inline},r.a.createElement(_,null,n?r.a.createElement(_,null,"CON"):r.a.createElement(_,null,"Constitution"),":"," "),r.a.createElement(_,null,t.Constitution))),r.a.createElement(U,{style:a.PlayerStat},r.a.createElement(ve,{ToolTip:f.Help.Abilities.Dexterity,style:a.Inline},r.a.createElement(_,null,n?r.a.createElement(_,null,"DEX"):r.a.createElement(_,null,"Dexterity"),":"," "),r.a.createElement(_,null,t.Dexterity))),r.a.createElement(U,{style:a.PlayerStat},r.a.createElement(ve,{ToolTip:f.Help.Abilities.Intelligence,style:a.Inline},r.a.createElement(_,null,n?r.a.createElement(_,null,"INT"):r.a.createElement(_,null,"Intelligence"),":"," "),r.a.createElement(_,null,t.Intelligence))))}}]),a}(n.Component),Dt=Object(h.b)(N)(wt),At=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).DisplayInventory=function(){for(var t=Object(d.a)({},e.props).Player,a=[],n=0;n<t.Backpack.maxItems;n++)t.Backpack.Items&&void 0!==t.Backpack.Items[n]?a.push(t.Backpack.Items[n]):a.push(null);return a.map((function(t,a){return r.a.createElement(de,Object.assign({draggable:!0,key:a,index:t&&t.image?"B"+(a<=99?("0"+Number(a+1)).slice(-2):a):null,showIndex:!0,image:t&&t.image||null,name:t&&t.Name||null,item:t,onClick:e.props.UseItem},e.props))}))},e}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Player,a=e.Styles;return r.a.createElement(U,{style:a.Inventory,hidden:!!this.props.MobileScreen&&this.props.HideInventory},r.a.createElement(U,{style:a.InventoryLabel,hidden:this.props.MobileScreen},r.a.createElement(ve,{ToolTip:f.Help.Backpack,style:a.Inline},"Backpack")),this.DisplayInventory(),r.a.createElement(ee,null),r.a.createElement(_,{style:a.InventoryWeightLabel},r.a.createElement(ve,{ToolTip:f.Help.BackpackWeight,style:a.Inline},"Weight:"," ",Number(t.Backpack.Weight.Current).toFixed(2))," ","/"," ",r.a.createElement(ve,{ToolTip:f.Help.BackpackMaxWeight,style:a.Inline},t.Backpack.Weight.Max," lbs")))}}]),a}(n.Component),Pt=Object(h.b)(N)(At),Lt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).DisplaySpellBook=function(){for(var t=Object(d.a)({},e.props.Player),a=t.SpellBook?t.SpellBook.Spells:[],n=[],o=0;o<L.NumberOfSpells;o++)!a||a.length<=o?n.push(r.a.createElement(de,{key:o})):n.push(r.a.createElement(de,{draggable:!1,key:o,index:o<=99?("0"+Number(o+1)).slice(-2):o,showIndex:!0,image:a[o]&&a[o].Image||null,name:a[o]&&a[o].Name||null,item:a[o],NoActionMenu:!0,onClick:e.props.CastSpell}));return n},e}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props),t=e.Styles,a=e.Player;return a.Class.Spellcaster&&a.SpellBook&&0!==a.SpellBook.MaxSpells?r.a.createElement(U,{style:t.SpellBook,hidden:!!this.props.MobileScreen&&this.props.HideSpellBook},r.a.createElement(U,{style:t.SpellBookLabel,hidden:this.props.MobileScreen},r.a.createElement(ve,{ToolTip:f.Help.SpellBook,style:t.Inline},"Spellbook")),this.DisplaySpellBook()):null}}]),a}(n.Component),Ht=Object(h.b)(N)(Lt),Bt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props).Styles;return r.a.createElement(U,{style:e.BottomControls})}}]),a}(n.Component),Nt=Object(h.b)(N)(Bt),Rt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).ToggleSaveGameStateBox=function(){e.props.ToggleGameStateBox("Save")},e.ToggleLoadGameStateBox=function(){e.props.ToggleGameStateBox("Load")},e.ToggleCancelGameStateBox=function(){e.props.ToggleGameStateBox("Cancel")},e}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props).Styles;return r.a.createElement(U,{style:e.GameState},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Buttons.NewGame,style:e.Inline},r.a.createElement(ye,{onClick:this.props.ShowCharacterScreen},"New Game")),r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Buttons.SaveGame,style:e.Inline},r.a.createElement(ye,{onClick:this.ToggleSaveGameStateBox},"Save Game")),r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Buttons.LoadGame,style:e.Inline},r.a.createElement(ye,{onClick:this.ToggleLoadGameStateBox},"Load Game")),r.a.createElement(ye,{onClick:this.ToggleCancelGameStateBox,hidden:!this.props.ShowGameStateBox},"Close"))}}]),a}(n.Component),Ft=Object(h.b)(N)(Rt),Wt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).GenerateSaveGameState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=n.state.IncludeStaticAssets),delete e.Keystrokes,delete e.ShowGameStateBox,delete e.EditableGameStateBox,delete e.MobileScreen,delete e.TabletScreen,delete e.LoadGameError,delete e.GameStateToLoad,delete e.CreateCharacter,delete e.RandomItems,delete e.ShowFullMap,delete e.NoClip,delete e.GodMode,delete e.CastAlwaysSucceeds,t||(e=n.StripStaticAssets(e));var a=JSON.stringify(e,null,"\t");return a},n.StripStaticAssets=function(e){return e},n.ToggleSaveStaticAsset=function(){var e=Object(d.a)({},n.props.state),t=!n.state.IncludeStaticAssets;n.setState({GameState:n.GenerateSaveGameState(e,t),IncludeStaticAssets:t})},n.onChange=function(e){n.props.EditableGameStateBox&&(n.props.UpdateGameStateToLoad(e.value),n.setState({GameState:e.value}))},n.onClick=function(e){n.props.EditableGameStateBox||e.select()},n.state={IncludeStaticAssets:!1,GameState:n.GenerateSaveGameState(Object(d.a)({},n.props.state),!1)},n}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e){!0===e.ShowGameStateBox&&(!this.props.EditableGameStateBox&&e.EditableGameStateBox?(this.props.UpdateGameStateToLoad(""),this.setState({GameState:""})):e.EditableGameStateBox||e.state===this.props.state||this.setState({GameState:this.GenerateSaveGameState(Object(d.a)({},e.state))}))}},{key:"render",value:function(){var e=Object(d.a)({},this.props).Styles;return r.a.createElement(U,{style:e.GameStateBoxContainer,hidden:!this.props.ShowGameStateBox},r.a.createElement(U,{hidden:!this.props.EditableGameStateBox},this.props.LoadGameError),r.a.createElement(U,{hidden:this.props.EditableGameStateBox},r.a.createElement("input",{type:"checkbox",checked:this.state.IncludeStaticAssets,onChange:this.ToggleSaveStaticAsset})," ","include static assets"),r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:this.props.EditableGameStateBox?f.Help.GameStateBox.LoadGame:f.Help.GameStateBox.SaveGame,style:e.Inline},r.a.createElement(Ce,{readOnly:!this.props.EditableGameStateBox,style:Object(d.a)({},e.GameStateBox),onChange:this.onChange,onClick:this.onClick,value:this.state.GameState})))}}]),a}(n.Component),Gt=Object(h.b)(N)(Wt),_t=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onClick=function(e){e.preventDefault();var t=Object(d.a)({},n.state),a=n.props.style.width.replace("px","");n.props.onClick((document.getElementById(n.state.Id).getBoundingClientRect().x-e.clientX)/a*-1),delete t.x,delete t.y,t.Dragging=!1,n.setState(t)},n.onMouseDown=function(e){e.preventDefault(),n.state.Dragging||n.setState({Dragging:!0,x:e.clientX,y:e.clientY});var t=Object(c.a)(n);document.addEventListener("mouseup",t.onMouseUp)},n.onMouseUp=function(e){e.preventDefault();var t=Object(d.a)({},n.state),a=n.props,r=a.style,o=a.Percentage,l=a.CurrentValue,i=a.MaxValue,s=a.MinValue,c=r.width.replace("px",""),p=o?l:(l-s)/(i-s);n.props.onClick((t.x-c*p-e.clientX)/c*-1),delete t.x,delete t.y,t.Dragging=!1,n.setState(t),document.removeEventListener("mouseup",n.onMouseUp)},n.state={Dragging:!1,Id:Math.floor(99999999999*Math.random())},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.Styles,a=e.style,n=e.Percentage,o=e.CurrentValue,l=e.MaxValue,i=e.MinValue,s=a.width.replace("px",""),c=Number(t.SliderCursor.width.replace("px",""))+Number(2*t.SliderCursor.border.replace(/[^0-9]/g,"")),p=n?null:(o-i)/(l-i);return r.a.createElement(U,{style:a},r.a.createElement(ve,{FlexibleWidth:!0,DisabledOnClick:!0,ToolTip:r.a.createElement(U,null,r.a.createElement(U,null,this.props.Metric?r.a.createElement(_,null,this.props.Metric,": "):null,this.props.Percentage?100*o+"%":o),r.a.createElement(U,null,this.props.Description))},r.a.createElement(U,{id:this.state.Id,onClick:this.onClick,onMouseDown:this.onMouseDown},r.a.createElement(U,{style:t.SliderTrack}),r.a.createElement(U,{style:t.SliderInside}),r.a.createElement(U,{style:Object(d.a)(Object(d.a)({},t.SliderCursor),{},{left:(s-2*c)*(p||o)+c/2+"px"})}))))}}]),a}(n.Component),Ut=Object(h.b)(N)(_t),Xt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(t){e.props.dispatch({type:"UPDATE_VOLUME",Volume:t})},e}return Object(p.a)(a,[{key:"render",value:function(){var e=Object(d.a)({},this.props.Styles),t=Object(d.a)(Object(d.a)({},e.Slider),e.VolumeSlider);return r.a.createElement(U,{style:e.VolumeControl},r.a.createElement(U,{style:e.VolumeLabel},"Sound:"),r.a.createElement(Ut,{Metric:"Volume",Description:f.Help.Sound,Percentage:!0,CurrentValue:this.props.Sound.Volume,onClick:this.onClick,style:t}))}}]),a}(n.Component),Yt=Object(h.b)(N)(Xt),Vt=L.Debug,zt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(U,{style:this.props.Styles.Rest,hidden:!!this.props.MobileScreen&&this.props.HideStats},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Buttons.Rest,style:this.props.Styles.Inline},r.a.createElement(ye,null,r.a.createElement(U,{style:this.props.Styles.RestButton},"Rest"))))}}]),a}(n.Component),Kt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"shouldComponentUpdate",value:function(e){return(e.MobileScreen!==this.props.MobileScreen||e.TabletScreen!==this.props.TabletScreen||e.HideStats!==this.props.HideStats||e.HideInventory!==this.props.HideInventory||e.HideSpellBook!==this.props.HideSpellBook)&&(Vt&&console.log("re-render: mobile screen tab selector"),!0)}},{key:"render",value:function(){return r.a.createElement(U,{style:this.props.Styles.TabSelector,hidden:!this.props.MobileScreen},r.a.createElement(U,{style:this.props.Styles.FlexBoxContainer},r.a.createElement(U,{style:this.props.Styles.TabButton},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Stats,style:this.props.Styles.Inline},r.a.createElement(ye,{StayClicked:!0,Clicked:!this.props.HideStats,onClick:this.props.ShowStats},"Stats"))),r.a.createElement(U,{style:this.props.Styles.TabButton},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Backpack,style:this.props.Styles.Inline},r.a.createElement(ye,{SmallPadding:!0,StayClicked:!0,Clicked:!this.props.HideInventory,onClick:this.props.ShowInventory},"Backpack"))),r.a.createElement(U,{style:this.props.Styles.TabButton},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.SpellBook,style:this.props.Styles.Inline},r.a.createElement(ye,{SmallPadding:!0,StayClicked:!0,Clicked:!this.props.HideSpellBook,onClick:this.props.ShowSpellBook,hidden:!this.props.Player.Class.Spellcaster},"Spells")))))}}]),a}(n.Component),qt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(U,{style:this.props.Styles.ResponsiveStatsContainer,hidden:!this.props.MobileScreen})}}]),a}(n.Component),Jt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(U,{style:this.props.Styles.ControlBlock},this.props.children)}}]),a}(n.Component),Zt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(){e.props.TakeSingleLoot(e.props.index,e.props.lootContainerId)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=Object.assign({},this.props.item);return r.a.createElement(de,Object.assign({onClick:this.onClick,image:e&&e.image||null,name:e&&e.Name||null,item:e,Loot:!0},this.props))}}]),a}(n.Component),Qt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(U,null,r.a.createElement(X,null,this.props.items&&this.props.items.map((function(t,a){return r.a.createElement(Zt,{key:a,index:a,item:t,lootContainerId:e.props.lootContainerId,TakeSingleLoot:e.props.TakeSingleLoot})}))))}}]),a}(n.Component),$t=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).GenerateEventText=function(){var t=Object.assign([],e.props.currentEvent),a=Object.assign({},e.props.Player),n=!1,o=!0,l=0,i=t.map((function(t,i){return"loot"===t.eventType?(n=!0,0===t.items.length?a.Stationary||(t.Name="empty "+t.Name.replace("empty ","")):o=!1,a.Stationary&&0===t.items.length?r.a.createElement(_,{key:i},r.a.createElement(_,null,"The "),r.a.createElement(_,null,t.Name.replace("empty","")),r.a.createElement(_,null," is empty."),r.a.createElement(ee,null)):(l+=t.items.length,r.a.createElement(_,{key:i},r.a.createElement(_,null,"You found "),r.a.createElement(_,null,F.IndefiniteArticle(t.Name)),r.a.createElement(_,null," "),r.a.createElement(_,null,t.Name),r.a.createElement(_,null,"."),r.a.createElement(Qt,Object.assign({items:t.items,lootContainerId:t.Id},e.props)),r.a.createElement(ee,null)))):(console.warn("Unknown type of event.",t),null)}));return n&&!o&&(1===l?i.push(r.a.createElement(X,{key:"Take"},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Buttons.Take,style:e.props.Styles.Inline},r.a.createElement(ye,{onClick:e.props.TakeAllLoot},"Take")))):i.push(r.a.createElement(X,{key:"TakeAll"},r.a.createElement(ve,{DisabledOnClick:!0,ToolTip:f.Help.Buttons.Take,style:e.props.Styles.Inline},r.a.createElement(ye,{onClick:e.props.TakeAllLoot},"Take All"))))),i},e}return Object(p.a)(a,[{key:"shouldComponentUpdate",value:function(e){return(e.MobileScreen!==this.props.MobileScreen||e.TabletScreen!==this.props.TabletScreen||e.currentEvent!==this.props.currentEvent||e.Player!==this.props.Player)&&(Vt&&console.log("re-render: event"),!0)}},{key:"render",value:function(){return r.a.createElement(U,{style:this.props.Styles.Event},this.GenerateEventText())}}]),a}(n.Component),ea=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(t){var a=document.getElementById("Story"),n=a.clientHeight/10*4,r=1;t.clientY-a.getBoundingClientRect().y<n&&(r=-1),e.props.Scroll("Story",r)},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(U,{style:this.props.Styles.StoryBlock},r.a.createElement(X,{id:"Story",style:this.props.Styles.StoryContainer,onClick:this.onClick},this.props.children))}}]),a}(n.Component),ta=function(e){return r.a.createElement(U,{style:e.Styles.Game},r.a.createElement(ce,null),r.a.createElement(ie,null),r.a.createElement(Le,null),r.a.createElement(_e,e),r.a.createElement(We,e),r.a.createElement(ea,e,r.a.createElement(Xe,null),r.a.createElement($t,e)),r.a.createElement(nt,e),r.a.createElement(Be,null),r.a.createElement(Jt,e),r.a.createElement(ut,null),r.a.createElement(xt,null),r.a.createElement(Mt,e),r.a.createElement(Kt,e),r.a.createElement(qt,e),r.a.createElement(zt,e),r.a.createElement(It,null),r.a.createElement(Dt,null),r.a.createElement(Pt,null),r.a.createElement(Ht,e),r.a.createElement(ot,null),r.a.createElement(Nt,null),r.a.createElement(Re,null),r.a.createElement(Ft,e),r.a.createElement(Gt,e),r.a.createElement(Yt,null))},aa=L.Debug,na=L.SoundDebug,ra=L.MapObjects,oa=ra.Wall,la=ra.Door,ia=ra.LootContainer,sa=ra.Undiscovered,ca=ra.Empty,pa=(Object(d.a)({},L.WallMapVisibleRange),L.ScreenSize.MobileScreen()),ua=L.ScreenSize.TabletScreen(),ma={Monsters:0,LootContainers:0,Items:0},da=null,ha=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).CalculateStyles=function(){if(pa=L.ScreenSize.MobileScreen(),ua=L.ScreenSize.TabletScreen(),pa!==n.props.MobileScreen||ua!==n.props.TabletScreen){pa?L.WallMapVisibleRangeMobileScreen:L.WallMapVisibleRange;var e="px",t="1px solid black",a="linear-gradient(135deg, #ccc 35%, #ddd 70%, #eee 100%)",r="linear-gradient(135deg, #aaa 35%, #ccc 70%, #ccc 100%)",o="linear-gradient(135deg, #777 35%, #999 70%, #999 100%)",l="1.5px solid black",i=Math.max(1,.75)+"px solid black",s=1,c=2,p=3,u=4,m=u,d=5,h=5,y=null,g=6,b=7,S=6,f=8,v=9,x=9,O=10;pa&&(s=1,c=2,p=3,u=4,m=5,d=6,h=7,y=8,g=9,b=10,S=11,f=12,v=13,x=14,O=15);var k=1,C=6,E=C,j=10,M=5,T=10,I=1,w=2,D=w,A=3,P=A,H=4,B=H,N=6,R=N,F=7,W=F,G=10,_=1,U=7,X=1,Y=7,V=7,z=10;pa?(k=1,C=10,E=1,j=10,M=1,T=10,I=1,D=w=4,P=A=7,H=9,B=1,F=N=4,G=4,W=7,G=10,_=1,U=10,X=1,Y=10,V=1,z=10):ua&&(D=w,P=A=4,B=H=5,F=N=6,W=7,G=10),(da={Hidden:{display:"none"},Placeholder:{background:"red",width:15+e,height:15+e},Paragraph:{display:"block",paddingBottom:"13px"},FlexBoxContainer:{display:"flex",justifyContent:"center"},Inline:{display:"inline"},TextEdit:{border:"none",padding:"5px",fontFamily:"inherit",fontSize:"inherit",width:"120px",background:"transparent"},TextEditFocus:{border:"none",padding:"5px",outline:"none",fontFamily:"inherit",fontSize:"inherit",width:"120px",background:"transparent"},TextEditUnderline:{border:"none",padding:"5px",fontFamily:"inherit",fontSize:"inherit",width:"120px",background:"transparent"},TextEditUnderlineFocus:{border:"none",padding:"5px",outline:"none",fontFamily:"inherit",fontSize:"inherit",width:"120px",background:"transparent",textDecoration:"underline"},CreatePlayer:{margin:"0 auto",width:pa?"300px":ua?"675px":"810px",userSelect:"none",cursor:"pointer",display:"grid",gridTemplateColumns:pa?"repeat(9, 34.4px)":ua?"repeat(9, 75px)":"repeat(9, 90px)",gridTemplateRows:"auto auto auto"},CharacterHeader:{padding:8,gridColumnStart:1,gridColumnEnd:10,gridRowStart:3},CharacterCreateName:{padding:8,gridColumnStart:1,gridColumnEnd:pa?10:4,gridRowStart:4,display:"grid",gridTemplateRows:"23px 23px 23px 23px",gridTemplateColumns:pa?"100px 130px repeat(8, 31px)":ua?"100px 130px repeat(8, 74.3px)":"100px 130px repeat(8, 88.6px)"},CreateCharacterContainer:{gridColumnStart:1,gridColumnEnd:10,gridRowStart:3,gridRowEnd:9,backgroundImage:"url(graphics/hud/parchment.jpg)"},CharacterCreateView:{padding:8,gridColumnStart:pa?1:4,gridColumnEnd:pa?10:7,gridRowStart:pa?5:4,display:"grid",gridTemplateRows:"23px 23px 23px 23px",gridTemplateColumns:pa?"100px 130px repeat(8, 31px)":ua?"100px 130px repeat(8, 74.3px)":"100px 130px repeat(8, 88.6px)"},CharacterCreateBackground:{padding:8,gridColumnStart:pa?1:6,gridColumnEnd:10,gridRowStart:pa?6:4,display:"grid",gridTemplateRows:"32px 32px 32px",gridTemplateColumns:pa?"100px 130px repeat(8, 31px)":ua?"100px 130px repeat(8, 74.3px)":"100px 130px repeat(8, 88.6px)"},CreateCharacterDescription:{gridColumnStart:1,gridColumnEnd:10,gridRowStart:pa?7:5,padding:8,paddingTop:"20px",minHeight:"100px"},StartGame:{gridColumnStart:1,gridColumnEnd:10,gridRowStart:8,padding:8,textAlign:"right"},PropertyLabel:{gridColumnStart:1,gridColumnEnd:1,padding:"2.5px",textAlign:"right",marginRight:"10px"},PropertyLabelForInput:{gridColumnStart:1,gridColumnEnd:1,paddingTop:"5px",textAlign:"right",marginRight:"10px"},PropertyField:{gridColumnStart:2,gridColumnEnd:2,padding:"2.5px"},PropertyFieldForInput:{gridColumnStart:2,gridColumnEnd:2},RollAbilities:{gridColumnStart:2},Game:{margin:"0 auto",width:pa?"270px":ua?"650px":"790px",userSelect:"none",cursor:"pointer",display:"grid",gridTemplateColumns:pa?"repeat(10, 29px)":ua?"110px 40px 50px 70px 70px 120px 35px repeat(3, 89px)":"110px repeat(4, 91px) 132px 30px repeat(2, 86px)",gridTemplateRows:n.state.CreateCharacter?null:"auto auto auto"+(n.state.CreateCharacter?"auto":245+e)+" "+(pa?"122.5px ":"")+"auto "+(pa?"auto ":"")+(pa?"auto ":"")+"auto auto "},Header:{gridColumnStart:1,gridColumnEnd:10,gridRowStart:s,textAlign:"center",fontFamily:"UnifrakturMaguntia, cursive",color:"white"},H1:{margin:"0px",fontStyle:"italic"},H2:{margin:"0px"},H3:{margin:"0px"},H4:{margin:"0px"},Link:{color:"inherit"},LinkHover:{color:"inherit",textDecoration:"none"},Contact:{gridColumnStart:M,gridColumnEnd:10,gridRowStart:c,fontFamily:"Indie Flower, cursive",textAlign:pa?"center":"right",paddingLeft:pa?"30px":null,color:"white"},GitHubLogo:{height:"30px",verticalAlign:"middle",marginLeft:"5px",backgroundColor:"white",borderRadius:"25px"},TopGameBackgroundImage:{gridColumnStart:1,gridColumnEnd:10,gridRowStart:p,gridRowEnd:m+1,backgroundImage:"url(graphics/hud/parchment.jpg)"},BottomGameBackgroundImage:{gridColumnStart:1,gridColumnEnd:10,gridRowStart:d,gridRowEnd:x+1,backgroundImage:"url(graphics/hud/metal.jpg)"},GameStateBackgroundImage:{gridColumnStart:1,gridColumnEnd:10,gridRowStart:O,backgroundImage:"url(graphics/hud/parchment.jpg)"},EventLog:{gridColumnStart:1,gridColumnEnd:T,gridRowStart:p,fontFamily:"Indie Flower, cursive",fontWeight:"bold",border:t,padding:"8px",height:Number(18.5*(pa?L.ResponsiveMaxEventLogEntries:L.MaxEventLogEntries))+e},EventLogContainer:{maxHeight:Number(18.5*(pa?L.ResponsiveMaxEventLogEntries:L.MaxEventLogEntries))+e,overflow:"auto",scrollBehavior:"smooth"},CustomLogEntryInputContainer:{marginLeft:"42.5px"},ClearLog:{gridColumnStart:8,gridColumnEnd:10,gridRowStart:p,textAlign:"right",padding:"8px",paddingRight:"25px",zIndex:"1000",height:"18px"},StoryBlock:{gridColumnStart:k,gridColumnEnd:C,gridRowStart:u,fontFamily:"Indie Flower, cursive",userSelect:"text",borderRight:t,borderLeft:t,padding:"8px"},StoryContainer:{maxHeight:pa?null:229+e,height:pa?106.5+e:null,overflow:"auto",scrollBehavior:"smooth"},Story:{userSelect:"text"},Event:{userSelect:"text"},Map:{gridColumnStart:E,gridColumnEnd:j,gridRowStart:m,overflow:"hidden",padding:"8px",borderRight:t,borderTop:pa?t:null,minWidth:pa?null:"300px"},MapRow:{height:15+e},MapObject:{display:"inline-block",width:15+e,height:15+e},Player:{boxSizing:"border-box",width:15+e,height:15+e,background:"purple",borderRadius:"50%"},Loot:{boxSizing:"border-box",margin:"1.5px",width:12+e,height:12+e,background:"orange",borderRadius:"50%"},Monster:{boxSizing:"border-box",margin:"1.5px",width:12+e,height:12+e,background:"red",borderRadius:"50%"},Wall:{Pillar:{boxSizing:"border-box",marginTop:2.5+e,marginRight:2.5+e,marginBottom:2.5+e,marginLeft:2.5+e,width:10+e,height:10+e,background:"black"},NorthToSouth:{boxSizing:"border-box",borderLeft:l,marginLeft:6.75+e,width:1.5+e,height:15+e},WestToEast:{boxSizing:"border-box",borderTop:l,marginTop:6.75+e,width:15+e,height:1.5+e},NorthToEast:{boxSizing:"border-box",borderLeft:l,borderBottom:l,marginLeft:6.75+e,width:8.25+e,height:8.25+e},NorthToWest:{boxSizing:"border-box",borderRight:l,borderBottom:l,marginRight:6.75+e,width:8.25+e,height:8.25+e},SouthToEast:{boxSizing:"border-box",borderLeft:l,borderTop:l,marginTop:6.75+e,marginLeft:6.75+e,width:8.25+e,height:8.25+e},SouthToWest:{boxSizing:"border-box",borderRight:l,borderTop:l,marginTop:6.75+e,marginRight:6.75+e,width:8.25+e,height:8.25+e},TShapedWallNSE:{boxSizing:"border-box",background:"black",marginLeft:6.75+e},NorthSouthAndEast:{boxSizing:"border-box",borderTop:"6.75px solid white",borderBottom:"6.75px solid white",marginLeft:1.5+e,width:8.25+e,height:15+e,background:"black"},TShapedWallNSW:{boxSizing:"border-box",background:"black",marginRight:6.75+e},NorthSouthAndWest:{boxSizing:"border-box",borderTop:"6.75px solid white",borderBottom:"6.75px solid white",width:6.75+e,height:15+e,background:"black"}},Door:{NorthToSouth:{boxSizing:"border-box",border:i,marginLeft:4+e,width:7+e,height:15+e,background:"lightsteelblue"},WestToEast:{boxSizing:"border-box",border:i,marginTop:4+e,width:15+e,height:7+e,background:"lightsteelblue"}},ControlBlock:{gridColumnStart:1,gridColumnEnd:10,gridRowStart:d,gridRowEnd:h+1,borderTop:t},PlayerStats0:{gridColumnStart:I,gridColumnEnd:w,gridRowStart:d,padding:"8px",textAlign:"center",color:"white"},PlayerVitals:{gridColumnStart:D,gridColumnEnd:A,gridRowStart:d,padding:"8px",color:"white"},ArrowContainer:{gridColumnStart:P,gridColumnEnd:H,gridRowStart:d,textAlign:"center",padding:"8px",margin:"auto"},Rest:{gridColumnStart:B,gridColumnEnd:N,gridRowStart:pa?y:h,padding:"8px",margin:"auto",marginTop:"25px"},PlayerAttributesStacked:{gridColumnStart:F,gridColumnEnd:G,gridRowStart:h,padding:"8px",color:"white"},TabSelector:{gridColumnStart:1,gridColumnEnd:10,gridRowStart:h,margin:"auto"},TabButton:{flexGrow:"1",flexBasis:"auto",textAlign:"center",margin:"auto"},ResponsiveStatsContainer:{gridColumnStart:1,gridColumnEnd:10,gridRowStart:y},PlayerStats2Block1:{gridColumnStart:F,gridColumnEnd:W,gridRowStart:pa?y:h,padding:"8px",color:"white"},PlayerStats2Block2:{gridColumnStart:W,gridColumnEnd:G,gridRowStart:pa?y:h,padding:"8px",color:"white"},PlayerStats3:{gridColumnStart:R,gridColumnEnd:7,gridRowStart:pa?y:h,padding:"8px",color:"white"},PlayerStat:{paddingBottom:"5px"},ReadyItemBlock:{paddingTop:"8px",height:"calc(100% - 18px)"},ReadyItem:{display:"inline-block"},StatBar:{boxSizing:"border-box",width:"100%",height:"14px",padding:"1px",border:"1px solid #555",background:"linear-gradient(135deg, dimgray 35%, gray 70%, #aaa 100%)",boxShadow:"inset 0 0 10px gray"},HealthBar:{background:"linear-gradient(0deg, red 50%, lightgray 100%)",height:"10px"},ManaBar:{background:"linear-gradient(0deg, blue 50%, lightgray 100%)",height:"10px"},StaminaBar:{background:"linear-gradient(0deg, green 50%, lightgray 100%)",height:"10px"},ArrowRow:{fontFamily:"MedievalSharp, cursive",width:"72px"},ArrowBlock:{display:"inline-block",width:"32px",height:"21.5px",textAlign:"center",border:"1px solid #333",paddingTop:"3px",margin:"1px",background:a,boxShadow:"inset 0 0 10px gray"},ArrowBlockHover:{display:"inline-block",width:"32px",height:"21.5px",textAlign:"center",border:"1px solid #333",paddingTop:"3px",margin:"1px",background:r,boxShadow:"inset 0 0 10px gray"},ArrowBlockClick:{display:"inline-block",width:"32px",height:"21.5px",textAlign:"center",border:"1px solid #333",paddingTop:"3px",margin:"1px",background:o,boxShadow:"inset 0 0 10px gray"},ActionButton:{fontFamily:"MedievalSharp, cursive",display:"inline-block",textAlign:"center",border:"1px solid black",padding:"3px 20px 3px 20px",margin:"1px",userSelect:"none",background:a,boxShadow:"inset 0 0 10px gray"},ActionButtonSmallPadding:{fontFamily:"MedievalSharp, cursive",display:"inline-block",textAlign:"center",border:"1px solid black",padding:"3px 10px 3px 10px",margin:"1px",userSelect:"none",background:a,boxShadow:"inset 0 0 10px gray"},ActionButtonHover:{fontFamily:"MedievalSharp, cursive",display:"inline-block",textAlign:"center",border:"1px solid black",padding:"3px 20px 3px 20px",margin:"1px",userSelect:"none",background:r,boxShadow:"inset 0 0 10px gray"},ActionButtonHoverSmallPadding:{fontFamily:"MedievalSharp, cursive",display:"inline-block",textAlign:"center",border:"1px solid black",padding:"3px 10px 3px 10px",margin:"1px",userSelect:"none",background:r,boxShadow:"inset 0 0 10px gray"},ActionButtonClick:{fontFamily:"MedievalSharp, cursive",display:"inline-block",textAlign:"center",border:"1px solid black",padding:"3px 20px 3px 20px",margin:"1px",userSelect:"none",background:o,boxShadow:"inset 0 0 10px gray"},ActionButtonClickSmallPadding:{fontFamily:"MedievalSharp, cursive",display:"inline-block",textAlign:"center",border:"1px solid black",padding:"3px 10px 3px 10px",margin:"1px",userSelect:"none",background:o,boxShadow:"inset 0 0 10px gray"},Inventory:{gridColumnStart:_,gridColumnEnd:U,gridRowStart:g,padding:"3.2px",color:"white"},InventoryLabel:{marginBottom:"3.2px"},InventoryWeightLabel:{marginBottom:"3.2px"},SpellBook:{gridColumnStart:X,gridColumnEnd:Y,gridRowStart:b,borderLeft:t,padding:"3.2px",color:"white"},SpellBookLabel:{marginBottom:"3.2px"},Accessories:{gridColumnStart:V,gridColumnEnd:z,gridRowStart:S,gridRowEnd:f,padding:"8px"},BottomControls:{gridColumnStart:1,gridColumnEnd:10,gridRowStart:x,padding:"8px"},GameState:{gridColumnStart:1,gridColumnEnd:pa?10:7,gridRowStart:v,padding:"8px",textAlign:pa?"center":null},GameStateBoxContainer:{gridColumnStart:1,gridColumnEnd:10,gridRowStart:O,fontFamily:"Indie Flower, cursive",padding:"8px",borderTop:"1px solid black",color:"black",fontWeight:"bold"},GameStateBox:{fontFamily:"Indie Flower, cursive",width:"100%",height:"500px",cursor:"pointer",outline:"none",background:"transparent",color:"white",border:"none"},VolumeControl:{gridColumnStart:pa?1:7,gridColumnEnd:10,gridRowStart:x,padding:"8px",color:"white"},VolumeLabel:{display:"inline-block",margin:"1px",textAlign:"right",width:"60px"},VolumeSlider:{float:"right",width:"120px"},Slider:{display:"block",height:"22px"},SliderTrack:{position:"relative",top:"8px",margin:"auto",width:"calc(100% - 4px)",height:"4px",border:"1px solid black",background:"linear-gradient(90deg, lightgray 0%, dimgray 100%)",borderRadius:"2px"},SliderInside:{position:"relative",top:"4px",margin:"auto",width:"calc(100% - 8px)",height:"2px",background:"linear-gradient(90deg, #999 0%, #555 100%)",borderRadius:"2px"},SliderCursor:{position:"relative",top:"-7.5px",height:"19px",width:"8px",border:"1px solid black",background:"linear-gradient(135deg, dimgray 0%, lightgray 100%)",borderRadius:"4px"},ItemImageBlock:{height:"32px",width:"32px",border:"1px solid #666",margin:"1px",textAlign:"center",float:"left",background:"linear-gradient(135deg, #999 35%, #aaa 60%, lightgray 100%)",boxShadow:"inset 0 0 10px gray"},ItemImageBlockClick:{position:"fixed",height:"32px",width:"32px",background:"#333",opacity:"0.5"},ItemImageBlockNumber:{color:"black",background:"white",width:"15px",fontSize:"10px",position:"relative",top:-15,right:-16,fontFamily:"VT323, monospace"},ItemImage:{maxHeight:"30px",width:"30px",padding:"1px",overflow:"hidden",fontSize:"10px"},ItemDescription:{zIndex:"900",position:"absolute",background:"#999",border:"1px solid #666",padding:"5px",maxWidth:"200px",textAlign:"left",opacity:"0.85",color:"white"},ItemDescriptionName:{fontWeight:"bold",textTransform:"capitalize"},ItemDescriptionContent:{paddingTop:"5px"},ItemActions:{zIndex:"800",position:"absolute",background:"#999",border:"1px solid #666",padding:"5px",minWidth:"90px",textAlign:"left",opacity:"0.85",color:"white"},ItemAction:{paddingTop:"2.5px",paddingBottom:"2.5px",paddingLeft:"2.5px",paddingRight:"2.5px"},ItemActionHover:{paddingTop:"2.5px",paddingBottom:"2.5px",paddingLeft:"2.5px",paddingRight:"2.5px",background:"#777"},ToolTipFlexibleWidth:{zIndex:"900",position:"absolute",background:"#999",border:"1px solid #666",padding:"5px",maxWidth:"200px",textAlign:"left",opacity:"0.85",color:"white",fontFamily:"initial",fontWeight:"normal"},ToolTip:{zIndex:"900",position:"absolute",background:"#999",border:"1px solid #666",padding:"5px",width:"200px",textAlign:"left",opacity:"0.85",color:"white",fontFamily:"initial",fontWeight:"normal"}}).Wall.NorthWestEastAndNorthWest=da.Wall.WestToEast,da.Wall.NorthSouthEastAndSouthEast=da.Wall.NorthToEast,n.setState({MobileScreen:pa,TabletScreen:ua},n.forceUpdate()),n.props.dispatch({type:"UPDATE_SCREEN_SIZE",MobileScreen:pa,TabletScreen:ua}),n.props.dispatch({type:"UPDATE_STYLES",Styles:da})}},n.GenerateFormattedDate=function(e){return[[e.getFullYear(),e.getMonth()+1,e.getDate()].join("-"),[n.PadNumber(e.getHours()),n.PadNumber(e.getMinutes())].join(":")].join(" ")},n.GenerateFormattedTime=function(e){var t=new Date(e);return[n.PadNumber(t.getMinutes(),3),n.PadNumber(t.getSeconds(),3)].join(":")},n.PadNumber=function(e){return e<10?"0"+e:e},n.GenerateIds=function(e,t){return Object(i.a)(e).map((function(e,a){return ma[t]||(ma[t]=0),e.Id=ma[t]++,e}))},n.InitGameEnvironment=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(d.a)({},L.Cheats);var a={Player:Object(d.a)({},R.Player),Backpack:Object(d.a)({},R.Backpack),AvailableStartSpell:Object(i.a)(R.AvailableStartSpell),LootContainers:n.GenerateIds(Object(i.a)(R.LootContainers),"LootContainers"),Monsters:n.GenerateIds(Object(i.a)(R.Monsters),"Monsters"),Texts:Object(i.a)(R.Text),WallMap:Object(i.a)(R.WallMap),GameStarted:{Milliseconds:Date.now(),HumanFriendly:n.GenerateFormattedDate(new Date)},EnterCustomLogEntry:!1,Cheats:t};if(e&&(a.CreateCharacter=aa?L.DebugCreateCharacter:R.CreateCharacter),a.RandomItems={},Object.keys(P.Items).map((function(e){var t=P.Items[e];return void 0===a.RandomItems["Level"+t.Level]&&(a.RandomItems["Level"+t.Level]=[]),a.RandomItems["Level"+t.Level].push(t),null})),e){var r=Object(d.a)({},a.Player);a.Player=n.CreateCharacter(r)}a.Backpack=n.CheckInventoryWeightAtStartUp(a.Backpack),a.Backpack.Items=n.GenerateIds(Object(i.a)(a.Backpack.Items),"Items"),a.Player.Backpack=Object(d.a)({},a.Backpack),a.Player.Backpack.Weight={Current:a.Player.Backpack.Weight,Max:a.Player.MaxWeight},a.Player.Backpack.ItemCount.Current=a.Player.Backpack.Items.length,a.WallMapRevealed=R.WallMap.map((function(e){return e.map((function(e){return" "}))})),a.DiscoveryMap=JSON.parse(JSON.stringify(R.WallMap.map((function(e,t){return e.map((function(e,n){return n>=a.Player.x-1&&n<=a.Player.x+1&&t>=a.Player.y-1&&t<=a.Player.y+1?ca:sa}))}))));var o=JSON.parse(JSON.stringify(R.WallMap.map((function(e){return e.map((function(e){return" "}))}))));a.LootContainers&&(a.LootContainers=a.LootContainers.map((function(e){return e.x&&e.y&&(o[e.y][e.x]=ia),e.items&&(e.items=n.GenerateIds(Object(i.a)(e.items),"Items")),e}))),a.LootMap=o;var l=JSON.parse(JSON.stringify(R.WallMap.map((function(e){return e.map((function(e){return" "}))}))));return R.Monsters&&R.Monsters.map((function(e){return l[e.y][e.x]=e.Id,null})),a.MonsterMap=l,a.currentText=R.StartText?R.StartText.text:null,a.currentTextImage=null,a.Story={Text:R.StartText?R.StartText.text:null,Image:R.StartText?R.StartText.image:null},a.EventLog=["00:00: "+f.Messages.NewGame],a.Turn=0,(aa||na)&&void 0!==L.DebugVolume?(a.Sound={Volume:L.DebugVolume},a.EventLog.push("00:00: Debug volume is "+L.DebugVolume+".")):a.Sound={Volume:L.DefaultSoundVolume||.3},n.props.dispatch({type:"UPDATE_PLAYER",Player:a.Player}),n.props.dispatch({type:"UPDATE_MONSTERS",Monsters:a.Monsters}),n.props.dispatch({type:"UPDATE_CHEATS",Cheats:a.Cheats}),n.props.dispatch({type:"UPDATE_EVENT_LOG",EventLog:a.EventLog}),n.props.dispatch({type:"UPDATE_STORY",Story:a.Story}),n.props.dispatch({type:"UPDATE_TEXTS",Texts:a.Texts}),n.props.dispatch({type:"UPDATE_SOUND",Sound:a.Sound}),n.props.dispatch({type:"UPDATE_MAPS",WallMap:a.WallMap,WallMapRevealed:a.WallMapRevealed,DiscoveryMap:a.DiscoveryMap,LootMap:a.LootMap,MonsterMap:a.MonsterMap}),n.props.dispatch({type:"UPDATE_LOOT",LootContainers:a.LootContainers}),n.props.dispatch({type:"UPDATE_TURN",Turn:0}),n.props.dispatch({type:"ADD_TIMESTAMP",Milliseconds:a.GameStarted.Milliseconds,HumanFriendly:a.GameStarted.HumanFriendly}),n.props.dispatch({type:"UPDATE_DEBUG",Debug:L.Debug,SoundDebug:L.SoundDebug}),n.props.dispatch({type:"UPDATE_SCREEN_SIZE",MobileScreen:pa,TabletScreen:ua}),a},n.ShowCharacterScreen=function(){n.setState({CreateCharacter:!0,GameInBackground:n.state},(function(){var e=this.CreateCharacter();this.setState({Player:e},(function(){this.CalculateStyles(),this.forceUpdate()}))}))},n.GeneratePlayerStats=function(){var e=Object(d.a)({},n.state.Player);e=n.CreateCharacter(e),n.setState({Player:e})},n.CreateCharacter=function(e){e||(e=Object(d.a)({},R.Player)),R.Player.Race?e.Race=Object(d.a)({},R.Player.Race):e.Race||(e.Race=Object(d.a)(Object(d.a)({},P.Races[Object.keys(P.Races)[2]]),{},{Id:Object.keys(P.Races)[2]})),R.Player.Class?e.Class=Object(d.a)({},R.Player.Class):e.Class||(e.Class=Object(d.a)(Object(d.a)({},P.Classes[Object.keys(P.Classes)[3]]),{},{Id:Object.keys(P.Classes)[3]}));for(var t=[],a=0;a<P.Classes[e.Class.Id].AbilityPriorities.length;a++)!e.Class.Spellcaster&&a<=1?t.push(n.GeneratePlayerAbilityScore(!0)):t.push(n.GeneratePlayerAbilityScore());t=t.sort((function(e,t){return e<t}));for(var r={},o=0;o<P.Classes[e.Class.Id].AbilityPriorities.length;o++)r[P.Classes[e.Class.Id].AbilityPriorities[o]]=t[o];return e.Constitution=Math.max(0,Math.min(R.Player.Constitution,f.MaxAbilityScore))||r.Constitution+(e.Race.AbilityBoost.Constitution||0),e.Strength=Math.max(0,Math.min(R.Player.Strength,f.MaxAbilityScore))||r.Strength+(e.Race.AbilityBoost.Strength||0),e.Dexterity=Math.max(0,Math.min(R.Player.Dexterity,f.MaxAbilityScore))||r.Dexterity+(e.Race.AbilityBoost.Dexterity||0),e.ArmorClass=Math.max(0,R.Player.ArmorClass)||10+n.AbilityModifier(e.Dexterity),e.MaxHealth=Math.max(0,R.Player.MaxHealth||0)||n.CalculateMaxHealth(e),e.Health=Math.max(0,R.Player.Health)||e.MaxHealth,e.MaxHealth<e.Health&&(e.MaxHealth=e.Health),e.MaxStamina=Math.max(0,R.Player.MaxStamina||0)||n.CalculateMaxStamina(e),e.Stamina=Math.max(0,R.Player.Stamina)||e.MaxStamina,e.MaxStamina<e.Stamina&&(e.MaxStamina=e.Stamina),e.MaxWeight=R.Player.MaxWeight||n.CalculateMaxWeight(e),e.Class.Spellcaster?(e.Intelligence=Math.max(0,Math.min(R.Player.Intelligence,f.MaxAbilityScore))||r.Intelligence+(e.Race.AbilityBoost.Intelligence||0),e.MaxMana=Math.max(0,R.Player.MaxMana||0)||n.CalculateMaxMana(e),e.Mana=Math.max(0,R.Player.Mana)||e.MaxMana,e.MaxMana<e.Mana&&(e.MaxMana=e.Mana)):(e.MaxMana=e.Mana=0,e.Intelligence=5),e.Abilities={Strength:e.Strength,Constitution:e.Constitution,Dexterity:e.Dexterity,Intelligence:e.Intelligence},e.Health={Current:e.Health,Max:e.MaxHealth},e.Mana={Current:e.Mana,Max:e.MaxMana},e.Stamina={Current:e.Stamina,Max:e.MaxStamina},e.Class.Spellcaster?e.SpellBook&&e.SpellBook.Spells||R.AvailableStartSpell&&R.AvailableStartSpell.length>0&&(e.SpellBook={Spells:[R.AvailableStartSpell[0]]}):delete e.SpellBook,R.Player.x||R.Player.x||(e.x=0,e.y=0,console.error("Please make sure to assign starting coordinates to the player.")),e.Facing=R.Player.Facing||"North",e.Level=R.Player.Level||1,e.XP=R.Player.XP||0,e},n.GeneratePlayerAbilityScore=function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[],a=0,r=1;r<=4+e;r++){var o=n.RollDice(1,6);t.push(o),a+=o}return a-=Math.min.apply(null,t)},n.CalculateMaxHealth=function(e){return e.MaxHealth,Math.ceil(2.5*e.Constitution+e.Strength/5)},n.CalculateMaxMana=function(e){return e.MaxMana,Math.ceil(1.85*e.Intelligence)},n.CalculateMaxStamina=function(e){return Math.ceil(5*e.Strength)},n.CalculateMaxWeight=function(e){return e.MaxWeight,Math.ceil(1.6*e.Strength)},n.SetRace=function(e){var t=Object(d.a)({},n.state.Player);t.Race=Object(d.a)({},e),t=n.CreateCharacter(t),n.setState({Player:t},(function(){}))},n.SetClass=function(e){var t=Object(d.a)({},n.state.Player);t.Class=Object(d.a)({},e),t=n.CreateCharacter(t),n.setState({Player:t})},n.SetFirstSpell=function(e){var t=Object(d.a)({},n.state.Player);t.SpellBook=e,n.setState({Player:t})},n.SavePlayerName=function(e){var t=Object(d.a)({},n.state.Player);t[e.name]=e.value,n.setState({Player:t})},n.StartPlaying=function(){n.setState({CreateCharacter:!1},(function(){var e=this.InitGameEnvironment();e.Player=Object(d.a)({},this.state.Player),e.Sound=Object(d.a)({},this.state.Sound),this.setState(e),this.CalculateStyles(),this.forceUpdate()}))},n.ResumeGame=function(){var e=Object(d.a)({},n.state.GameInBackground);n.setState(e,(function(){delete this.state.GameInBackground,this.CalculateStyles(),this.forceUpdate()}))},n.ToggleGameStateBox=function(e){var t=n.state.EditableGameStateBox,a=!n.state.ShowGameStateBox,r=!0;if("Save"===e&&(r=!1),"Save"!==e||t||(a=!0),"Save"===e&&t&&(a=!0,n.UpdateGameStateToLoad("")),"Load"!==e||t||(a=!0),"Load"===e&&t)return n.LoadGame(n.state.GameStateToLoad),!1;"Cancel"===e&&(r=!1,a=!1,n.UpdateGameStateToLoad("")),n.setState({EditableGameStateBox:r,ShowGameStateBox:a,LoadGameError:""})},n.UpdateGameStateToLoad=function(e){n.setState({GameStateToLoad:e,LoadGameError:""})},n.LoadGame=function(){var e=n.state.GameStateToLoad;try{e=JSON.parse(e),delete n.state,n.setState(e,(function(){this.CalculateStyles()}))}catch(t){aa&&console.error("Invalid JSON object.",e),n.setState({LoadGameError:f.Messages.LoadGameError.Invalid})}},n.ShowStats=function(){n.setState({HideStats:!1,HideInventory:!0,HideSpellBook:!0})},n.ShowInventory=function(){n.setState({HideStats:!0,HideInventory:!1,HideSpellBook:!0})},n.ShowSpellBook=function(){n.setState({HideStats:!0,HideInventory:!0,HideSpellBook:!1})},n.ListenToKeyboard=function(e){var t=Object(d.a)({},n.state),a=Object(d.a)({},n.state.Player),r=n.state.Keystrokes?Object(i.a)(n.state.Keystrokes):[];if(a.Dead)return!1;if("textarea"===e.target.tagName.toLowerCase()||"input"===e.target.tagName.toLowerCase())return!1;null===e.key.match(/(F[1-9]|F1[0-2])/)&&e.preventDefault(),aa&&console.log("keypress: ",e.key);var o=!1;if(r?r.push(e.key):r=[e.key],n.setState({Keystrokes:r},(function(){null!==this.state.Keystrokes.join("").match(/[0-9][1-9]/)&&(this.CastSpellFromKeyboard(this.state.Keystrokes.join("")),this.FlushKeystrokeHistory(),o=!0),null!==this.state.Keystrokes.join("").match(/b[0-9][1-9]/)&&(this.UseItemFromKeyboard(this.state.Keystrokes.join("")),this.FlushKeystrokeHistory(),o=!0),this.LookForCheats(this.state.Keystrokes.join(""))&&(o=!0)})),o)return!0;switch(e.key){default:break;case"Escape":case"Enter":n.FlushKeystrokeHistory();break;case"ArrowDown":if(t.CreateCharacter)return!1;n.MovePlayer("South"),n.onClickArrow(e.key),n.FlushKeystrokeHistory();break;case"ArrowUp":if(t.CreateCharacter)return!1;n.MovePlayer("North"),n.onClickArrow(e.key),n.FlushKeystrokeHistory();break;case"ArrowLeft":if(t.CreateCharacter)return!1;n.MovePlayer("West"),n.onClickArrow(e.key),n.FlushKeystrokeHistory();break;case"ArrowRight":if(t.CreateCharacter)return!1;n.MovePlayer("East"),n.onClickArrow(e.key),n.FlushKeystrokeHistory();break;case"+":n.props.dispatch({type:"INCREASE_VOLUME"}),n.PlaySound("sound_control");break;case"-":n.props.dispatch({type:"DECREASE_VOLUME"}),n.PlaySound("sound_control");break;case"m":n.props.dispatch({type:"MUTE_VOLUME"});break;case"t":if(t.CreateCharacter)return!1;n.TakeAllLoot(),n.FlushKeystrokeHistory()}},n.LookForCheats=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!1,r=Object(d.a)({},n.state),o="d!";if((t&&e===o+"debug"||!t&&e.indexOf("debug")>-1)&&(aa=!aa,console.log(aa?f.Messages.Debug.On:f.Messages.Debug.Off),n.SetText(aa?f.Messages.Debug.On:f.Messages.Debug.Off),n.FlushKeystrokeHistory(),a=!0),(t&&e===o+"sound"||!t&&e.indexOf("sound")>-1)&&(na=!na,console.log(na?f.Messages.SoundDebug.On:f.Messages.SoundDebug.Off),n.SetText(na?f.Messages.SoundDebug.On:f.Messages.SoundDebug.Off),n.FlushKeystrokeHistory(),a=!0),(t&&e===o+"showmap"||!t&&e.indexOf("showmap")>-1)&&(n.setState({ShowFullMap:void 0===r.ShowFullMap||!r.ShowFullMap},(function(){this.SetText(this.state.ShowFullMap?f.Messages.Cheats.ShowFullMap.On:f.Messages.Cheats.ShowFullMap.Off)})),n.FlushKeystrokeHistory(),a=!0),(t&&e===o+"noclip"||!t&&e.indexOf("noclip")>-1)&&(n.setState({NoClip:void 0===r.NoClip||!r.NoClip},(function(){this.SetText(this.state.NoClip?f.Messages.Cheats.NoClip.On:f.Messages.Cheats.NoClip.Off)})),n.FlushKeystrokeHistory(),a=!0),(t&&e===o+"god"||!t&&e.indexOf("god")>-1)&&(n.setState({GodMode:void 0===r.GodMode||!r.GodMode},(function(){this.SetText(this.state.GodMode?f.Messages.Cheats.GodMode.On:f.Messages.Cheats.GodMode.Off)})),n.FlushKeystrokeHistory(),a=!0),t&&e===o+"spell"||!t&&e.indexOf("spell")>-1){if(r.CreateCharacter)return!1;n.setState({CastAlwaysSucceeds:void 0===r.CastAlwaysSucceeds||!r.CastAlwaysSucceeds},(function(){this.SetText(this.state.CastAlwaysSucceeds?f.Messages.Cheats.CastAlwaysSucceeds.On:f.Messages.Cheats.CastAlwaysSucceeds.Off)})),n.FlushKeystrokeHistory(),a=!0}return a},n.FlushKeystrokeHistory=function(){n.setState({Keystrokes:[]})},n.PlaySound=function(e,t){var a=Object(d.a)({},n.props.Sound);if(!Object.getOwnPropertyNames(a).length||0===a.Volume)return!1;for(var r=[".wav",".ogg"],o=["",e+"/"],l=!1,i=0,s=0,p=o.length*r.length+(o.length-1)*r.length*L.MaxSoundFilesPerFolder,u=[],m=new Audio,h=function(t){m.play().then((function(){na&&console.log("Played:",t.src),t.volume=a.Volume,l=!0})).catch((function(){++s===p&&console.error(["Sound '",e,"' not found."].join(""))}))},y=function(){s++,i++,s===p&&console.error(["Sound '",e,"' not found."].join(""))},g=Object(c.a)(n),b=function(t,n,s,c){t.onloadeddata=function(){if(l)return console.warn(["Warning: Sound files for the '",e,"' event were both found in the 'sounds/' folder and in the 'sounds/",e+"/","' subfolder.\n              \nIf you want to play a randomly selected sound when this event occur, keep the 'sounds/",e+"/","' subfolder and delete the '",e,"' file at the root of the 'sounds/' folder.\n              \nIf you want to play the exact same sound every time, delete the 'sounds/",e+"/","' subfolder and keep the '",e,"' file at the root of the 'sounds/' folder."].join("")),null;if(i++,u.push("./sounds/"+o[n]+e+(c||"")+r[s]),i===p){var m=u[g.RandomInteger(u.length)];t=new Audio(m),na&&console.log("Random sound options:",u),t.play().then((function(){na&&console.log("Played:",t.src),t.volume=a.Volume,l=!0})).catch((function(){console.error(["Could not play '",m,"'."].join(""))}))}}},S=0;S<o.length;S++){for(var f=0;f<r.length;f++){if(""!==o[S])for(var v=0;v<=L.MaxSoundFilesPerFolder&&(na&&console.log("Inspecting:","./sounds/"+o[S]+e+(v||"")+r[f]),(m=new Audio("./sounds/"+o[S]+e+(v||"")+r[f])).onerror=y,b(m,S,f,v),!l);v++);else i++,na&&console.log("Inspecting:","./sounds/"+e+r[f]),h(m=new Audio("./sounds/"+e+r[f]));if(l){console.log("BREAK");break}}if(l)break}n.setState({Sound:a})},n.RandomDirection=function(e){e=e.filter((function(e){return e.length>0}));var t=Math.floor(Math.random()*e.length),a=Math.floor(Math.random()*e[t].length);return e[t][a]},n.RandomIntegerFromRange=function(e,t){return Math.floor(Math.random()*(Math.floor(t)-Math.floor(e)+1))+Math.floor(e)},n.RandomInteger=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return Math.floor(Math.random()*Math.floor(e))},n.RollD20=function(){return n.RandomIntegerFromRange(1,20)},n.RollDice=function(e,t){for(var a=0,r=1;r<=e;r++)a+=n.RandomIntegerFromRange(1,t);return a},n.AbilityModifier=function(e){return e<=1?-5:e<=3?-4:e<=5?-3:e<=7?-2:e<=9?-1:e<=11?0:e<=13?1:e<=15?2:e<=17?3:e<=19?4:e<=21?5:e<=23?6:e<=25?7:e<=27?8:e<=29?9:10},n.GetUnlucky=function(e){return n.RandomInteger()+e<=60},n.SetMessage=function(e){e&&n.setState({currentMessage:e})},n.SetText=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e||t){var a=Object(i.a)(n.state.EventLog),r=n.state.GameStarted.Milliseconds;if(a||(a=[]),Array.isArray(e)){var o=Object(i.a)(e);a=[].concat(Object(i.a)(a),Object(i.a)(o.map((function(e){return[n.GenerateFormattedTime(Date.now()-r),e].join(": ")}))))}else a.push([n.GenerateFormattedTime(Date.now()-r),e].join(": "));n.setState({EventLog:a},(function(){this.ScrollToBottom("EventLog"),this.state.EnterCustomLogEntry&&this.setState({EnterCustomLogEntry:!1,CustomLogEntry:""})}))}},n.ScrollToBottom=function(e){if(document.getElementById(e)){var t=document.getElementById(e);t.scrollTop=t.scrollHeight}},n.ScrollToTop=function(e){(console.log("go"),document.getElementById(e))&&(document.getElementById(e).scrollTop=0)},n.Scroll=function(e,t){if(document.getElementById(e)){var a=document.getElementById(e);a.scrollTop=a.scrollTop+a.clientHeight*t-(18+t)*t}},n.ClearLog=function(){n.setState({EventLog:[],EnterCustomLogEntry:!1,CustomLogEntry:""})},n.DisplayCustomLogEntryInput=function(e){var t=n.state,a=t.EnterCustomLogEntry,r=t.CustomLogEntry,o=t.CustomLogEntryInputRecentlyClosed;a||o||n.setState({EnterCustomLogEntry:!0},(function(){this.ScrollToBottom("EventLog")})),o&&n.setState({CustomLogEntryInputRecentlyClosed:!1}),!a||""!==r&&r||"CustomLogEntry"!==e.target.name&&n.setState({EnterCustomLogEntry:!1})},n.StoreCustomLogEntryInput=function(e){n.setState({CustomLogEntry:e.value})},n.SaveCustomLogEntryInput=function(e){var t=n.state.CustomLogEntry;n.SetText(t),n.LookForCheats(t,!0),n.state.EnterCustomLogEntry&&n.setState({EnterCustomLogEntry:!1,CustomLogEntry:"",CustomLogEntryInputRecentlyClosed:!0})},n.onClickArrow=function(e){var t={};t[e]=da.ArrowBlockClick,n.setState({arrowStyle:t},(function(){this.ResetArrowStyle()}))},n.ResetArrowStyle=function(){null!==n.state.arrowStyle&&setTimeout(function(){this.setState({arrowStyle:null})}.bind(Object(c.a)(n)),50)},n.UpdateText=function(e){var t=e.x,a=e.y,r=n.state.currentText,o=n.state.currentTextImage,l=Object(i.a)(n.state.Texts),s=!1;return l&&(l.map((function(e,n){return e.Used?null:e.accessPoints?e.accessPoints.filter((function(i){return i.x===t&&i.y===a&&(s=!0,r=e.text,o=e.image||null,l[n].Used=!0,!0)})):null})),r!==n.state.currentText&&n.ScrollToTop("Story"),n.setState({currentText:r,currentTextImage:o,Text:l})),s},n.AbilityCheck=function(e,t){return n.RandomInteger()>=100-e/f.MaxAbilityScore*100-(t||0)},n.FindMonsterById=function(e){return Object.assign([],n.state.Monsters).filter((function(t){return t.Id===e}))},n.FindSingleMonsterInSurroundings=function(e){var t=Object.assign([],n.state.MonsterMap),a=[].concat(t[e.y-1].slice(e.x-1,e.x+2),t[e.y].slice(e.x-1,e.x+2),t[e.y+1].slice(e.x-1,e.x+2)).filter((function(e){return e!==ca}));return a.length>0&&n.FindMonsterById(a[0])},n.CastSpellFromKeyboard=function(e){var t=Object(d.a)({},n.state.Player);if(!t.Class.Spellcaster||!t.SpellBook)return!1;var a=t.SpellBook.Spells.filter((function(t,a){return a===Number(e-1)}));if(!a.length)return!1;n.CastSpell(a[0])},n.CastSpell=function(e,t){var a=Object(d.a)({},n.state.Player),r=Object(i.a)(n.state.Monsters),o=Object(i.a)(n.state.MonsterMap),l=n.state.Turn,s=n.state.CastAlwaysSucceeds,c=!1,p=!0;if(!t&&(t=a,c=!0,a.Dead))return!1;if(!e.ManaCost||t.Mana>=e.ManaCost){if(e.Level>t.Level)return c&&n.SetText(f.Messages.Spell.UnsufficientLevel),!1;var u=0;if(t.Intelligence<=5)return n.SetText(f.Messages.Spell.CanNotCast),!1;if(u=t.Intelligence<=10?L.MaxSpellLevel/e.Level/4:L.MaxSpellLevel/e.Level,n.AbilityCheck(t.Intelligence,u)||s){if(e.Sound&&n.PlaySound(e.Sound),"Heal"===e.Type)t[e.Heal.Property]+=Math.min(n.RandomIntegerFromRange(e.Heal.Min,e.Heal.Max),t["Max"+e.Heal.Property]);else if("Attack"===e.Type)if(e.Target&&"Adjacent"!==e.Target){if("Surrounding"===e.Target){for(var m=[].concat(o[t.y-1].slice(t.x-1,t.x+2),o[t.y].slice(t.x-1,t.x+2),o[t.y+1].slice(t.x-1,t.x+2)).filter((function(e){return e!==ca})),h=0;h<Math.min(e.MaxTargets||8,m.length);){var y=n.FindMonsterById(m[h]);n.MonsterTakeDamage(y[0],n.RandomIntegerFromRange(e.Damage.Min,e.Damage.Max)),h++}0===h&&c&&n.SetText(f.Messages.Spell.NoTargetArea)}}else{var g={x:t.x+L.DirectionsOffset[t.Facing].x,y:t.y+L.DirectionsOffset[t.Facing].y},b=r.filter((function(e,t){return e.x===g.x&&e.y===g.y}));if(0===b.length)c&&(n.SetText(f.Messages.Spell.NoTarget),p=!1);else{var S=n.RandomIntegerFromRange(e.Damage.Min,e.Damage.Max);if(n.MonsterTakeDamage(b[0],S),e.Vampiric&&(t.Health+=S),"Adjacent"===e.Target&&e.MaxTargets)for(var v=b[0],x=0;x<e.MaxTargets-1&&v;){var O=n.FindSingleMonsterInSurroundings(v);console.log("target hit:",x,"\nmonster in center:",v,"\nnew target:",O),O&&(n.MonsterTakeDamage(O[0],n.RandomIntegerFromRange(e.Damage.Min,e.Damage.Max)),x++),v=O[0]}}}return c&&(l++,t.Stamina--,t.Mana-=e.ManaCost||0,t.SpellActionUsed=!0,p&&n.SetText(f.PartialMessages.SpellSuccess+e.Name+f.PartialMessages.Period),n.setState({Player:t,Turn:l},(function(){this.MoveMonsters()}))),!0}n.PlaySound("spell_failed"),c&&(t.Mana-=e.ManaCost||0,n.setState({Player:t}),n.SetText(f.Messages.Spell.Failed[n.RandomInteger(f.Messages.Spell.Failed.length)]))}else c&&n.SetText(f.Messages.Spell.NotEnoughMana[n.RandomInteger(f.Messages.Spell.NotEnoughMana.length)]);return!1},n.MovePlayer=function(e){var t=Object(d.a)({},n.state.Player),a=Object(i.a)(n.state.WallMap),r=Object(i.a)(n.state.MonsterMap),o=n.state.NoClip,l=!0;if(t.Dead)return!1;var s=n.MoveObject({x:t.x,y:t.y},e);if(s.y>a.length-1||s.y<0||s.x>a[s.y].length-1||s.x<0)return n.SetText(f.Messages.Collision),void n.PlaySound("cant_go_there");var c=n.CheckLockedDoors(s);if(c.Locked&&!o){var p=n.UnlockDoor(c.Object);if(!p.Unlocked)return void n.setState({currentText:f.Messages.LockedDoor,currentTextImage:null});var u=f.PartialMessages.UnlockDoor+p.Key+f.PartialMessages.Period;n.setState({currentText:u,currentTextImage:null})}if(r[s.y][s.x]!==ca)l=!1,n.AttackMonster(s),s.x=t.x,s.y=t.y;else if(!n.DetectCollision(s))return n.SetText(f.Messages.Collision),void n.PlaySound("cant_go_there");n.MoveMonsters(s),n.WakeUpMonster(s);var m=n.state.Turn,h=Object.assign([],n.state.DiscoveryMap),y=Object.assign([],n.state.currentEvent),g=n.state.currentText,b=n.state.currentTextImage;t.Facing=e,l&&(h=n.UpdateDiscoveryMap(s),(y=n.CheckLootContainers(s)).length>0&&(g="",b=null),t.x=s.x,t.y=s.y,t.Stationary=!1),t.Stamina>1&&t.Stamina--,m++;var S={x:t.x,y:t.y};if(t!==n.state.Player){var v=n.state.Player;v.Health!==t.Health&&(t.Health=v.Health,t.Dead=v.Dead),t.x=S.x,t.y=S.y}n.setState({Player:t,Turn:m,currentEvent:y,currentText:g,currentTextImage:b,DiscoveryMap:h}),n.UpdateText(s)},n.MoveObject=function(e,t){var a={x:e.x,y:e.y};return"West"===t&&(a.x-=1),"East"===t&&(a.x+=1),"North"===t&&(a.y-=1),"South"===t&&(a.y+=1),a},n.DetectCollision=function(e){var t=e.x,a=e.y,r=Object.assign([],n.state.WallMap),o=Object.assign([],n.state.MonsterMap);return!!n.state.NoClip||!(a<0||t<0||a>=r.length||t>=r[a].length)&&(o[a][t]===ca&&(r[a][t]===ca||r[a][t]===la&&!n.CheckLockedDoors({x:t,y:a}).Locked))},n.UpdateDiscoveryMap=function(e){var t=e.x,a=e.y;return Object.assign([],n.state.DiscoveryMap).map((function(e,n){return e.map((function(e,r){return n>=a-1&&n<=a+1&&r>=t-1&&r<=t+1?ca:e}))}))},n.CheckLockedDoors=function(e){var t=e.x,a=e.y,r=Object.assign([],n.state.LockedDoors);if(r){var o=r.filter((function(e){return e.x===t&&e.y===a&&!e.Unlocked}));return{Locked:o.length>0,Object:o.length>0?o[0]:null}}return{Locked:!1,Object:null}},n.UnlockDoor=function(e){var t=Object.assign({},n.state.Backpack),a=t.Items.filter((function(t){return t.DoorId===e.Id}));return a.length>0&&(e.Unlocked=!0,n.setState({Backpack:t})),{Unlocked:a.length>0,Key:a.length>0?a[0].Name:null}},n.CheckLootContainers=function(e){var t=e.x,a=e.y,r=Object(i.a)(n.state.LootContainers);if(r){var o=r.filter((function(e){return e.items&&(e.items=e.items.map((function(e){return n.GenerateRandomLoot(e)})).filter((function(e){return null!==e}))),e.x===t&&e.y===a}));return o=o.map((function(e){return e.eventType="loot",e}))}return[]},n.GenerateRandomLoot=function(e){var t=Object.assign({},n.state.RandomItems);if(e&&e.random){if(n.GetUnlucky(10))return null;e=t["Level"+e.Level][n.RandomIntegerFromRange(0,t["Level"+e.Level].length-1)]}return e},n.TakeAllLoot=function(){if(!n.state.currentEvent)return!1;var e=Object(i.a)(n.state.currentEvent);if(0===e.length)return!1;var t=Object(d.a)({},n.state.Player),a=Object(d.a)({},n.state.Backpack);if(t.Dead)return!1;var r=[],o=0,l=a.maxItems-(a.Items?a.Items.length:0),s=e.filter((function(e){return!("loot"!==e.eventType||!e.items)&&(o+=e.items.length,!0)}));if(0===s.length)return!1;s.map((function(e){return"loot"===e.eventType&&e.items&&(r=r.concat(e.items)),null})),l>=o&&r.length>0?n.CheckInventoryWeight(r)?(e.map((function(e){return"loot"===e.eventType&&e.items&&(e.items=[]),null})),a.Items=a.Items?a.Items.concat(r):Object(i.a)(r),a.Weight=n.CheckInventoryWeight(r,!0),t.Stationary=!0,n.setState({Backpack:a,Player:t}),n.SetText(f.Messages.Loot.Gathered),n.PlaySound("take_loot")):n.SetText(f.Messages.Loot.TooHeavy):r.length>0&&n.SetText(f.Messages.Loot.TooMuch)},n.TakeSingleLoot=function(e,t){var a=Object(i.a)(n.state.LootContainers),r=Object(d.a)({},n.state.Backpack),o=Object(d.a)({},n.state.Player);if(o.Dead)return!1;var l=r.maxItems-(r.Items?r.Items.length:0),s=a.filter((function(e){return e.Id===t}))[0];l>0?n.CheckInventoryWeight([s.items[e]])?(r.Items||(r.Items=[]),r.Items.push(s.items[e]),r.Weight=n.CheckInventoryWeight(s.items[e],!0),console.log(r),n.setState({Backpack:r},(function(){s.items.splice(e,1),o.Stationary=!0,this.setState({currentEvent:this.state.currentEvent,Player:o})}))):n.SetText(f.Messages.Loot.ItemTooHeavy):n.SetText(f.Messages.Loot.BackpackFull)},n.DropItem=function(){console.log("drop")},n.CheckInventoryWeight=function(e,t){var a=Object.assign({},n.state.Backpack),r=Object.assign({},n.state.Player),o=0;(o=a.Items&&a.Items.length>0?a.Items.map((function(e){return null!==e&&e.Weight||0})).reduce((function(e,t){return e+t})):0,e&&e.length>0)&&(o+=e.map((function(e){return null!==e&&e.Weight||0})).reduce((function(e,t){return e+t})));return o<=r.MaxWeight&&(!t||o)},n.CheckInventoryWeightAtStartUp=function(e){var t=0;return t=e.Items&&e.Items.length>0?e.Items.map((function(e){return null!==e&&e.Weight||0})).reduce((function(e,t){return e+t})):0,e.Weight=t,e},n.WakeUpMonster=function(e){var t=e.x,a=e.y,r=Object(i.a)(n.state.Monsters),o=!1;if(r){var l=r.map((function(e){return e.x>=t-1&&e.x<=t+1&&e.y>=a-1&&e.y<=a+1&&!e.ChasePlayer&&(o=!0,e.ChasePlayer=!0,e.Stationary=!1,n.SetText(F.IndefiniteArticle(e.Name,!0)+" "+e.Name+f.PartialMessages.MonsterNoticed)),e}));n.setState({Monsters:l}),o&&n.PlaySound("player_noticed")}},n.MoveMonsters=function(e){var t=Object(i.a)(n.state.Monsters),a=Object(d.a)({},n.state.Player);t&&t.filter((function(e){return!e.Dead&&(e.ChasePlayer||!e.Stationary)})).map((function(t){return t.ChasePlayer?n.ChasePlayer(t,e||{x:a.x,y:a.y}):n.Patrol(t)}))},n.Patrol=function(e){var t=Object.assign([],n.state.MonsterMap),a=n.GetSurroundingWalls({x:e.x,y:e.y});a=(a=a.map((function(e,t){return e.map((function(e,a){return e===ca?0===a&&0===t||2===a&&2===t||2===a&&0===t||0===a&&2===t?oa:{x:a-1,y:t-1}:e}))}))).map((function(e,t){return e.filter((function(e){return e!==oa&&e!==la}))}));var r=n.RandomDirection(a);return t[e.y][e.x]=ca,t[e.y+r.y][e.x+r.x]=e.Id,e.x=e.x+r.x,e.y=e.y+r.y,e},n.ChasePlayer=function(e,t){var a=Object(i.a)(n.state.MonsterMap),r=Object(i.a)(n.state.Monsters),o=Object(i.a)(n.state.WallMap),l=e.x,s=e.y,c=t.x-e.x,p=t.y-e.y,u=null;r.filter((function(t,a){return t.Id===e.Id&&(u=a,!0)})),p<0&&o[e.y-1][e.x]===ca&&a[e.y-1][e.x]===ca&&e.y-1!==t.y?e.y-=1:p>0&&o[e.y+1][e.x]===ca&&a[e.y+1][e.x]===ca&&e.y+1!==t.y?e.y+=1:c<0&&o[e.y][e.x-1]===ca&&a[e.y][e.x-1]===ca&&e.x-1!==t.x?e.x-=1:c>0&&o[e.y][e.x+1]===ca&&a[e.y][e.x+1]===ca&&e.x+1!==t.x?e.x+=1:p<0&&c<0&&o[e.y-1][e.x]===ca&&a[e.y-1][e.x]===ca&&(e.y-1!==t.y||e.y-1===t.y&&e.x!==t.x)?e.y-=1:p<0&&c<0&&o[e.y][e.x-1]===ca&&a[e.y][e.x-1]===ca&&(e.x-1!==t.x||e.x-1===t.x&&e.y!==t.y)?e.x-=1:p<0&&c>0&&o[e.y-1][e.x]===ca&&a[e.y-1][e.x]===ca&&(e.y-1!==t.y||e.y-1===t.y&&e.x!==t.x)?e.y-=1:p<0&&c>0&&o[e.y][e.x+1]===ca&&a[e.y][e.x+1]===ca&&(e.x+1!==t.x||e.x+1===t.x&&e.y!==t.y)?e.x+=1:p>0&&c<0&&o[e.y+1][e.x]===ca&&a[e.y+1][e.x]===ca&&(e.y+1!==t.y||e.y+1===t.y&&e.x!==t.x)?e.y+=1:p>0&&c<0&&o[e.y][e.x-1]===ca&&a[e.y][e.x-1]===ca&&(e.x-1!==t.x||e.x-1===t.x&&e.y!==t.y)?e.x-=1:p>0&&c>0&&o[e.y+1][e.x]===ca&&a[e.y+1][e.x]===ca&&(e.y+1!==t.y||e.y+1===t.y&&e.x!==t.x)?e.y+=1:p>0&&c>0&&o[e.y][e.x+1]===ca&&a[e.y][e.x+1]===ca&&(e.x+1!==t.x||e.x+1===t.x&&e.y!==t.y)&&(e.x+=1),c=t.x-e.x,p=t.y-e.y,(0===c&&(1===p||-1===p)||0===p&&(1===c||-1===c)||0===c&&0===p)&&n.AttackPlayer(e),a[s][l]=ca,a[e.y][e.x]=e.Id,r[u]=e,n.setState({MonsterMap:a,Monsters:r})},n.AttackPlayer=function(e){var t=Object(d.a)({},n.state.Player);if(t.Dead)return!1;if(n.RandomInteger(100)>=t.Dexterity){var a=n.RandomIntegerFromRange(e.Damage.Min,e.Damage.Max);n.PlaySound("attack_hit"),n.SetText(F.IndefiniteArticle(e.Name,!0)+" "+e.Name+f.PartialMessages.MonsterAttacking),n.PlayerTakeDamage(a)}else n.PlaySound("attack_missed"),n.SetText(F.IndefiniteArticle(e.Name,!0)+" "+e.Name+f.PartialMessages.MonsterMissed)},n.AttackMonster=function(e){var t=Object(d.a)({},n.state.Player),a=Object(d.a)({},n.props.Player.Gear),r=Object.assign([],n.state.Monsters),o=0;if(n.RandomInteger(100)>=t.Dexterity){var l=r.filter((function(t,a){return t.x===e.x&&t.y===e.y&&(o=a,!0)}));if(l.length>0){l=l[0];var i=n.RandomIntegerFromRange(a.LeftHand.Damage.Min+n.AbilityModifier(t.Strength),a.LeftHand.Damage.Max+n.AbilityModifier(t.Strength));n.PlaySound("attack_hit"),n.SetText(f.PartialMessages.PlayerHit+F.IndefiniteArticle(l.Name)+" "+l.Name+f.PartialMessages.Period),n.MonsterTakeDamage(l,i,o)}}else n.PlaySound("attack_missed"),n.SetText(f.Messages.PlayerMissed)},n.PlayerTakeDamage=function(e){var t=Object(d.a)({},n.state.Player);if(!n.state.GodMode){if(t.Health=Math.max(0,t.Health-e),console.log("Boom!",t.Health),t.Health<=0)return t.Dead=!0,n.SetText(f.Messages.PlayerDead),n.setState({Player:t}),!1;n.setState({Player:t})}return!0},n.MonsterTakeDamage=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Object.assign([],n.state.MonsterMap),o=Object(i.a)(n.state.Monsters);return e.Health=Math.max(0,e.Health-t),!(e.Health<=0)||(e.Dead=!0,r[e.y][e.x]=ca,n.SetText(f.PartialMessages.MonsterKilled+F.IndefiniteArticle(e.Name)+" "+e.Name+f.PartialMessages.Period),n.DistributeXP(e),null!==a&&o.splice(a,1),n.setState({Monsters:o}),!1)},n.GetSurroundingWalls=function(e){var t=e.x,a=e.y,r=Object.assign([],n.state.WallMap),o=[a-1>=0?r[a-1].slice(t-1,t+2):[oa,oa,oa],r[a].slice(t-1,t+2),a+1<r.length?r[a+1].slice(t-1,t+2):[oa,oa,oa]];return 0===t?o=[[oa,r[a-1][t],r[a-1][t+1]],[oa,r[a][t],r[a][t+1]],[oa,r[a+1][t],r[a+1][t+1]]]:t===r[a].length-1&&(o=[[r[a-1][t-1],r[a-1][t],oa],[r[a-1][t-1],r[a][t],oa],[r[a-1][t-1],r[a+1][t],oa]]),o},n.UseItemFromKeyboard=function(e){var t=Object(d.a)({},n.state.Backpack).Items.filter((function(t,a){return a===Number(e.replace("b","")-1)}));if(0===t.length)return!1;n.UseItem(t[0])},n.UseItem=function(e,t){console.log(t,e),n[e.Action]&&n[e.Action](e)},n.DrinkPotion=function(e){var t=Object(d.a)({},n.state.Player),a=Object(d.a)({},n.state.Backpack),r=null;if(t[e.Heal]){var o=Math.min(t["Max"+e.Heal],t[e.Heal]+e.Strength+F.RandomIntegerFromRange(-2,3));r=o-t[e.Heal]===0?f.Messages.Potion.NoEffect:o-t[e.Heal]<=5?f.Messages.Potion[e.Heal+"1"]:o-t[e.Heal]<=10?f.Messages.Potion[e.Heal+"2"]:f.Messages.Potion[e.Heal+"3"],t[e.Heal]=o}else r=f.Messages.Potion.NoEffect;a.Items=n.RemoveItemFromInventory(e),n.PlaySound("drink_potion",999),r&&n.SetText(r),n.setState({Player:t,Backpack:a},(function(){(a=Object(d.a)({},this.state.Backpack)).Weight=this.CheckInventoryWeight(null,!0),this.setState({Backpack:a})}))},n.ConsumeFood=function(e){var t=Object.assign({},n.state.Player),a=Object.assign({},n.state.Backpack),r=Number(e.RestoreStamina),o=r+n.RandomIntegerFromRange(Math.floor(r/-4),Math.ceil(r/4));t.Stamina=Math.min(t.MaxStamina,t.Stamina+o),a.Items=n.RemoveItemFromInventory(e);var l=[f.Messages.Food.Yummy,f.Messages.Food.Delicious,f.Messages.Food.Diet,f.Messages.Food.NotAsGoodAsMyMom];t.Stamina/t.MaxStamina<.4&&l.push(f.Messages.Food.Rest),t.Stamina/t.MaxStamina<.7?l.push(f.Messages.Food.More):t.Stamina/t.MaxStamina>.9&&l.push(f.Messages.Food.NotNecessary),n.SetText(l[n.RandomInteger(l.length)]),n.setState({Player:t,Backpack:a},(function(){(a=Object(d.a)({},this.state.Backpack)).Weight=this.CheckInventoryWeight(null,!0),this.setState({Backpack:a})}))},n.RemoveItemFromInventory=function(e){var t=Object(d.a)({},n.state.Backpack),a=[];return t.Items.map((function(t,n){return t.Id===e.Id&&void 0!==typeof t.Id||a.push(t),null})),a},n.DistributeXP=function(e){if(!e)return!1;var t=Object.assign({},n.state.Player);e.XP&&(t.XP+=e.XP,t.Level<f.MaxPlayerLevel&&t.XP>f.LevelXP["Level"+Number(t.Level+1)]&&t.Level++,n.setState({Player:t}))},n.state=Object(d.a)(Object(d.a)({},n.InitGameEnvironment(!0)),{},{HideInventory:!0,HideSpellBook:!0,HideStats:!1}),n}return Object(p.a)(a,[{key:"componentWillMount",value:function(){document.addEventListener("keydown",this.ListenToKeyboard,!1),window.addEventListener("resize",this.CalculateStyles,!1),this.CalculateStyles(),this.ShowStats()}},{key:"componentDidMount",value:function(){var e=Object(d.a)({},this.state),t=[];aa&&t.push(f.Messages.Debug.On),na&&t.push(f.Messages.SoundDebug.On),e.ShowFullMap&&t.push(f.Messages.Cheats.ShowFullMap.On+(aa?" ShowFullMap is ON.":"")),e.NoClip&&t.push(f.Messages.Cheats.NoClip.On+(aa?" NoClip is ON.":"")),e.GodMode&&t.push(f.Messages.Cheats.GodMode.On+(aa?" GodMode is ON.":"")),e.CastAlwaysSucceeds&&t.push(f.Messages.Cheats.CastAlwaysSucceeds.On+(aa?" CastAlwaysSucceeds is ON.":"")),this.SetText(t)}}]),Object(p.a)(a,[{key:"render",value:function(){return this.state.CreateCharacter?r.a.createElement(Ae,Object.assign({},this,this.state,{Styles:da})):r.a.createElement(ta,Object.assign({},this,this.state,{Styles:da}))}}]),a}(n.Component),ya=Object(h.b)(N)(ha),ga=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,{store:B},r.a.createElement(ya,null))}}]),a}(n.Component);l.a.render(r.a.createElement(ga,null),document.getElementById("root"))},96:function(e,t,a){e.exports=a(195)}},[[96,1,2]]]);
//# sourceMappingURL=main.7fa54404.chunk.js.map